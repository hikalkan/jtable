!function(e,t,i,o){function a(t,i){this.options=e.extend(!0,{},n,i),this.input=t,this.$input=e(t),this._defaults=n,this._name="geocomplete",this.init()}var n={bounds:!0,country:null,map:!1,details:!1,detailsAttribute:"name",detailsScope:null,autoselect:!0,location:!1,mapOptions:{zoom:14,scrollwheel:!1,mapTypeId:"roadmap"},markerOptions:{draggable:!1},maxZoom:16,types:["geocode"],blur:!1,geocodeAfterResult:!1,restoreValueAfterBlur:!1},s="street_address route intersection political country administrative_area_level_1 administrative_area_level_2 administrative_area_level_3 colloquial_area locality sublocality neighborhood premise subpremise postal_code natural_feature airport park point_of_interest post_box street_number floor room lat lng viewport location formatted_address location_type bounds".split(" "),r="id place_id url website vicinity reference name rating international_phone_number icon formatted_phone_number".split(" ");e.extend(a.prototype,{init:function(){this.initMap(),this.initMarker(),this.initGeocoder(),this.initDetails(),this.initLocation()},initMap:function(){if(this.options.map){if("function"==typeof this.options.map.setCenter)return void(this.map=this.options.map);this.map=new google.maps.Map(e(this.options.map)[0],this.options.mapOptions),google.maps.event.addListener(this.map,"click",e.proxy(this.mapClicked,this)),google.maps.event.addListener(this.map,"dragend",e.proxy(this.mapDragged,this)),google.maps.event.addListener(this.map,"idle",e.proxy(this.mapIdle,this)),google.maps.event.addListener(this.map,"zoom_changed",e.proxy(this.mapZoomed,this))}},initMarker:function(){if(this.map){var t=e.extend(this.options.markerOptions,{map:this.map});t.disabled||(this.marker=new google.maps.Marker(t),google.maps.event.addListener(this.marker,"dragend",e.proxy(this.markerDragged,this)))}},initGeocoder:function(){var t={types:this.options.types,bounds:this.options.bounds===!0?null:this.options.bounds,componentRestrictions:this.options.componentRestrictions};this.options.country&&(t.componentRestrictions={country:this.options.country}),this.autocomplete=new google.maps.places.Autocomplete(this.input,t),this.geocoder=new google.maps.Geocoder,this.map&&this.options.bounds===!0&&this.autocomplete.bindTo("bounds",this.map),google.maps.event.addListener(this.autocomplete,"place_changed",e.proxy(this.placeChanged,this)),this.$input.on("keypress."+this._name,function(e){return 13===e.keyCode?!1:void 0}),this.options.geocodeAfterResult===!0&&this.$input.bind("keypress."+this._name,e.proxy(function(){9!=event.keyCode&&this.selected===!0&&(this.selected=!1)},this)),this.$input.bind("geocode."+this._name,e.proxy(function(){this.find()},this)),this.$input.bind("geocode:result."+this._name,e.proxy(function(){this.lastInputVal=this.$input.val()},this)),this.options.blur===!0&&this.$input.on("blur."+this._name,e.proxy(function(){(this.options.geocodeAfterResult!==!0||this.selected!==!0)&&(this.options.restoreValueAfterBlur===!0&&this.selected===!0?setTimeout(e.proxy(this.restoreLastValue,this),0):this.find())},this))},initDetails:function(){function t(e){a[e]=i.find("["+o+"="+e+"]")}if(this.options.details){if(this.options.detailsScope)var i=e(this.input).parents(this.options.detailsScope).find(this.options.details);else var i=e(this.options.details);var o=this.options.detailsAttribute,a={};e.each(s,function(e,i){t(i),t(i+"_short")}),e.each(r,function(e,i){t(i)}),this.$details=i,this.details=a}},initLocation:function(){var e,t=this.options.location;if(t){if("string"==typeof t)return void this.find(t);t instanceof Array&&(e=new google.maps.LatLng(t[0],t[1])),t instanceof google.maps.LatLng&&(e=t),e&&(this.map&&this.map.setCenter(e),this.marker&&this.marker.setPosition(e))}},destroy:function(){this.map&&(google.maps.event.clearInstanceListeners(this.map),google.maps.event.clearInstanceListeners(this.marker)),this.autocomplete.unbindAll(),google.maps.event.clearInstanceListeners(this.autocomplete),google.maps.event.clearInstanceListeners(this.input),this.$input.removeData(),this.$input.off(this._name),this.$input.unbind("."+this._name)},find:function(e){this.geocode({address:e||this.$input.val()})},geocode:function(t){t.address&&(this.options.bounds&&!t.bounds&&(t.bounds=this.options.bounds===!0?this.map&&this.map.getBounds():this.options.bounds),this.options.country&&(t.region=this.options.country),this.geocoder.geocode(t,e.proxy(this.handleGeocode,this)))},selectFirstResult:function(){var t="";e(".pac-item-selected")[0]&&(t="-selected");var i=e(".pac-container:last .pac-item"+t+":first span:nth-child(2)").text(),o=e(".pac-container:last .pac-item"+t+":first span:nth-child(3)").text(),a=i;return o&&(a+=" - "+o),this.$input.val(a),a},restoreLastValue:function(){this.lastInputVal&&this.$input.val(this.lastInputVal)},handleGeocode:function(e,t){if(t===google.maps.GeocoderStatus.OK){var i=e[0];this.$input.val(i.formatted_address),this.update(i),e.length>1&&this.trigger("geocode:multiple",e)}else this.trigger("geocode:error",t)},trigger:function(e,t){this.$input.trigger(e,[t])},center:function(e){e.viewport?(this.map.fitBounds(e.viewport),this.map.getZoom()>this.options.maxZoom&&this.map.setZoom(this.options.maxZoom)):(this.map.setZoom(this.options.maxZoom),this.map.setCenter(e.location)),this.marker&&(this.marker.setPosition(e.location),this.marker.setAnimation(this.options.markerOptions.animation))},update:function(e){this.map&&this.center(e.geometry),this.$details&&this.fillDetails(e),this.trigger("geocode:result",e)},fillDetails:function(t){var i={},o=t.geometry,a=o.viewport,n=o.bounds;e.each(t.address_components,function(t,o){o.types[0];e.each(o.types,function(e,t){i[t]=o.long_name,i[t+"_short"]=o.short_name})}),e.each(r,function(e,o){i[o]=t[o]}),e.extend(i,{formatted_address:t.formatted_address,location_type:o.location_type||"PLACES",viewport:a,bounds:n,location:o.location,lat:o.location.lat(),lng:o.location.lng()}),e.each(this.details,e.proxy(function(e,t){var o=i[e];this.setDetail(t,o)},this)),this.data=i},setDetail:function(e,t){t===o?t="":"function"==typeof t.toUrlValue&&(t=t.toUrlValue()),e.is(":input")?e.val(t):e.text(t)},markerDragged:function(e){this.trigger("geocode:dragged",e.latLng)},mapClicked:function(e){this.trigger("geocode:click",e.latLng)},mapDragged:function(){this.trigger("geocode:mapdragged",this.map.getCenter())},mapIdle:function(){this.trigger("geocode:idle",this.map.getCenter())},mapZoomed:function(){this.trigger("geocode:zoom",this.map.getZoom())},resetMarker:function(){this.marker.setPosition(this.data.location),this.setDetail(this.details.lat,this.data.location.lat()),this.setDetail(this.details.lng,this.data.location.lng())},placeChanged:function(){var e=this.autocomplete.getPlace();if(this.selected=!0,e.geometry)this.update(e);else if(this.options.autoselect){var t=this.selectFirstResult();this.find(t)}}}),e.fn.geocomplete=function(t){var i="plugin_geocomplete";if("string"==typeof t){var o=e(this).data(i)||e(this).geocomplete().data(i),n=o[t];return"function"==typeof n?(n.apply(o,Array.prototype.slice.call(arguments,1)),e(this)):(2==arguments.length&&(n=arguments[1]),n)}return this.each(function(){var o=e.data(this,i);o||(o=new a(this,t),e.data(this,i,o))})}}(jQuery,window,document),function(e){var t=0;e.fn.freezeHeader=function(i){function o(o){var r=o.attr("id")||"tbl-"+ ++t;if(o.length>0&&"table"==o[0].tagName.toLowerCase()){var l={id:r,grid:o,container:null,header:null,divScroll:null,openDivScroll:null,closeDivScroll:null,scroller:null};i&&void 0!==i.height&&(l.divScroll='<div id="hdScroll'+l.id+'" style="height: '+i.height+'; overflow-y: scroll">',l.closeDivScroll="</div>"),l.header=l.grid.find("thead tr:first"),i&&void 0!==i.height&&0==e("#hdScroll"+l.id).length&&l.grid.wrapAll(l.divScroll),l.scroller=e(i&&void 0!==i.height?"#hdScroll"+l.id:window),i&&void 0!==i.scrollListenerEl&&(l.scroller=i.scrollListenerEl),l.scroller.on("scroll",function(){0==e("#hd"+l.id).length&&l.grid.before('<div id="hd'+l.id+'"></div>'),l.container=e("#hd"+l.id),null!=l.header.offset()&&(a(l,i)?s||(n(l),s=!0):(e(document).scrollTop()>l.header.offset().top?(l.container.css("position","absolute"),l.container.css("top",l.grid.find("tr:last").offset().top-l.header.height()+"px")):(l.container.css("visibility","hidden"),l.container.css("top","0px"),l.container.width(0)),s=!1))})}}function a(t,i){return!i||void 0===i.height&&void 0===i.scrollListenerEl?e(document).scrollTop()>t.header.offset().top&&e(document).scrollTop()<t.grid.height()-t.header.height()-t.grid.find("tr:last").height()+t.header.offset().top:t.header.offset().top<=t.scroller.offset().top}function n(t){t.container.html(""),t.container.val("");var o=e('<table style="margin: 0 0;"></table>'),a=t.grid.prop("attributes");e.each(a,function(){"id"!=this.name&&o.attr(this.name,this.value)}),o.append("<thead>"+t.header.html()+"</thead>"),t.container.append(o),t.container.width(t.header.width()),t.container.height(t.header.height),t.container.find("th").each(function(i){var o=t.grid.find("th").eq(i).width();e(this).css("width",o-5),e(this).css("font-size","80%")}),t.container.css("visibility","visible"),t.container.css("background-color","rgba(230, 230, 230, 0.8)"),i&&void 0!==i.height?(t.container.css("top",t.scroller.offset().top+"px"),t.container.css("position","absolute")):i&&void 0!==i.scrollListenerEl?(t.container.css("top",t.scroller.find("thead > tr").innerHeight()+"px"),t.container.css("position","absolute"),t.container.css("z-index","2")):(t.container.css("top","0px"),t.container.css("position","fixed"))}var s=!1;return this.each(function(t,i){o(e(i))})}}(jQuery),function(e){var t;e(window).on("beforeunload",function(){t=!0}),e(window).on("unload",function(){t=!1}),e.widget("hik.jtable",{options:{actions:{},fields:{},animationsEnabled:!0,defaultDateFormat:"yy-mm-dd",dialogShowEffect:"fade",dialogHideEffect:"fade",showCloseButton:!1,loadingAnimationDelay:500,saveUserPreferences:!0,jqueryuiTheme:!1,unAuthorizedRequestRedirectUrl:null,freezeHeader:!1,bootstrapTheme:!1,ajaxSettings:{type:"POST",dataType:"json"},toolbar:{hoverAnimation:!0,hoverAnimationDuration:60,hoverAnimationEasing:void 0,items:[]},closeRequested:function(){},formCreated:function(){},formSubmitting:function(){},formClosed:function(){},loadingRecords:function(){},recordsLoaded:function(){},rowInserted:function(){},rowsRemoved:function(){},messages:{serverCommunicationError:"An error occured while communicating to the server.",loadingMessage:"Loading records...",noDataAvailable:"No data available!",areYouSure:"Are you sure?",save:"Save",saving:"Saving",cancel:"Cancel",error:"Error",close:"Close",cannotLoadOptionsFor:"Can not load options for field {0}"}},_$mainContainer:null,_$titleDiv:null,_$toolbarDiv:null,_$table:null,_$tableBody:null,_$tableRows:null,_$busyDiv:null,_$busyMessageDiv:null,_$errorDialogDiv:null,_columnList:null,_fieldList:null,_keyField:null,_firstDataColumnOffset:0,_lastPostData:null,_cache:null,_lastRecord:null,_create:function(){this._normalizeFieldsOptions(),this._initializeFields(),this._createFieldAndColumnList(),this._createMainContainer(),this._createTableTitle(),this._createToolBar(),this._createTable(),this._createBusyPanel(),this._createErrorDialogDiv(),this._addNoDataRow(),this._cookieKeyPrefix=this._generateCookieKeyPrefix()},_normalizeFieldsOptions:function(){var t=this;e.each(t.options.fields,function(e,i){t._normalizeFieldOptions(e,i)})},_normalizeFieldOptions:function(t,i){if(void 0==i.listClass&&(i.listClass=""),void 0==i.inputClass&&(i.inputClass=""),i.dependsOn&&"string"===e.type(i.dependsOn)){var o=i.dependsOn.split(",");i.dependsOn=[];for(var a=0;a<o.length;a++)i.dependsOn.push(e.trim(o[a]))}},_initializeFields:function(){this._lastPostData={},this._$tableRows=[],this._columnList=[],this._fieldList=[],this._cache=[]},_createFieldAndColumnList:function(){var t=this;e.each(t.options.fields,function(e,i){t._fieldList.push(e),1==i.key&&(t._keyField=e),0!=i.list&&"hidden"!=i.type&&t._columnList.push(e)})},_createMainContainer:function(){this._$mainContainer=e("<div />").addClass("jtable-main-container").appendTo(this.element),this._jqueryuiThemeAddClass(this._$mainContainer,"ui-widget")},_createTableTitle:function(){var t=this;if(t.options.title){var i=e("<div />").addClass("jtable-title").appendTo(t._$mainContainer);if(t._jqueryuiThemeAddClass(i,"ui-widget-header"),e("<div />").addClass("jtable-title-text").appendTo(i).append(t.options.title),t.options.showCloseButton){var o=e("<span />").html(t.options.messages.close);e("<button></button>").addClass("jtable-command-button jtable-close-button").attr("title",t.options.messages.close).append(o).appendTo(i).click(function(e){e.preventDefault(),e.stopPropagation(),t._onCloseRequested()})}t._$titleDiv=i}},_createTable:function(){this._$table=e("<table></table>").addClass("jtable").appendTo(this._$mainContainer),this.options.tableId&&this._$table.attr("id",this.options.tableId),this._jqueryuiThemeAddClass(this._$table,"ui-widget-content"),this._createTableHead(),this._createTableBody();var t=e(this._$table);this.options.freezeHeader&&t.freezeHeader()},_createTableHead:function(){var t=e("<thead></thead>").appendTo(this._$table);this._addRowToTableHead(t)},_addRowToTableHead:function(t){var i=e("<tr></tr>").appendTo(t);this._addColumnsToHeaderRow(i)},_addColumnsToHeaderRow:function(e){for(var t=0;t<this._columnList.length;t++){var i=this._columnList[t],o=this._createHeaderCellForField(i,this.options.fields[i]);o.appendTo(e)}},_createHeaderCellForField:function(t,i){i.width=i.width||"10%";var o=e("<span />").addClass("jtable-column-header-text").html(i.title),a=e("<div />").addClass("jtable-column-header-container").append(o),n=e("<th></th>").addClass("jtable-column-header").addClass(i.listClass).css("width",i.width).data("fieldName",t).append(a);return this._jqueryuiThemeAddClass(n,"ui-state-default"),n},_createEmptyCommandHeader:function(){var t=e("<th></th>").addClass("jtable-command-column-header").css("width","1%");return this._jqueryuiThemeAddClass(t,"ui-state-default"),t},_createTableBody:function(){this._$tableBody=e("<tbody></tbody>").appendTo(this._$table)},_createBusyPanel:function(){this._$busyMessageDiv=e("<div />").addClass("jtable-busy-message").prependTo(this._$mainContainer),this._$busyDiv=e("<div />").addClass("jtable-busy-panel-background").prependTo(this._$mainContainer),this._jqueryuiThemeAddClass(this._$busyMessageDiv,"ui-widget-header"),this._hideBusy()},_createErrorDialogDiv:function(){var t=this;t._$errorDialogDiv=e("<div></div>").appendTo(t._$mainContainer),t._$errorDialogDiv.dialog({appendTo:t._$mainContainer,autoOpen:!1,show:t.options.dialogShowEffect,hide:t.options.dialogHideEffect,modal:!0,title:t.options.messages.error,buttons:[{text:t.options.messages.close,click:function(){t._$errorDialogDiv.dialog("close")}}]})},load:function(e,t){this._lastPostData=e,this._reloadTable(t)},reload:function(e){this._reloadTable(e)},getRowByKey:function(e){for(var t=0;t<this._$tableRows.length;t++)if(e==this._getKeyValueOfRecord(this._$tableRows[t].data("record")))return this._$tableRows[t];return null},destroy:function(){this.element.empty(),e.Widget.prototype.destroy.call(this)},_setOption:function(){},_reloadTable:function(t){var i=this,o=function(e){return i._hideBusy(),"OK"!=e.Result?void i._showError(e.Message):(i._removeAllRows("reloading"),i._addRecordsToTable(e.Records),i._onRecordsLoaded(e),void(t&&t()))};if(i._showBusy(i.options.messages.loadingMessage,i.options.loadingAnimationDelay),i._onLoadingRecords(),e.isFunction(i.options.actions.listAction)){var a=i.options.actions.listAction(i._lastPostData,i._createJtParamsForLoading());i._isDeferredObject(a)?a.done(function(e){o(e)}).fail(function(){i._showError(i.options.messages.serverCommunicationError)}).always(function(){i._hideBusy()}):o(a)}else{var n=i._createRecordLoadUrl();i._ajax({url:n,data:i._lastPostData,success:function(e){o(e)},error:function(){i._hideBusy(),i._showError(i.options.messages.serverCommunicationError)}})}},_createRecordLoadUrl:function(){return this.options.actions.listAction},_createJtParamsForLoading:function(){return{}},_createRowFromRecord:function(t){var i=e("<tr></tr>").addClass("jtable-data-row").attr("data-record-key",this._getKeyValueOfRecord(t)).data("record",t);return this._addCellsToRowUsingRecord(i),i},_addCellsToRowUsingRecord:function(e){for(var t=e.data("record"),i=0;i<this._columnList.length;i++)this._createCellForRecordField(t,this._columnList[i]).appendTo(e)},_createCellForRecordField:function(t,i){return e("<td></td>").addClass(this.options.fields[i].listClass).append(this._getDisplayTextForRecordField(t,i))},_addRecordsToTable:function(t){var i=this;e.each(t,function(e,t){i._addRow(i._createRowFromRecord(t))}),i._refreshRowStyles()},_addRowToTable:function(e,t,i,o){var a={index:this._normalizeNumber(t,0,this._$tableRows.length,this._$tableRows.length)};1==i&&(a.isNewRow=!0),0==o&&(a.animationsEnabled=!1),this._addRow(e,a)},_addRow:function(t,i){i=e.extend({index:this._$tableRows.length,isNewRow:!1,animationsEnabled:!0},i),this._$tableRows.length<=0&&this._removeNoDataRow(),i.index=this._normalizeNumber(i.index,0,this._$tableRows.length,this._$tableRows.length),i.index==this._$tableRows.length?(this._$tableBody.append(t),this._$tableRows.push(t)):0==i.index?(this._$tableBody.prepend(t),this._$tableRows.unshift(t)):(this._$tableRows[i.index-1].after(t),this._$tableRows.splice(i.index,0,t)),this._onRowInserted(t,i.isNewRow),i.isNewRow&&(this._refreshRowStyles(),this.options.animationsEnabled&&i.animationsEnabled&&this._showNewRowAnimation(t))},_showNewRowAnimation:function(e){var t="jtable-row-created";this.options.jqueryuiTheme&&(t+=" ui-state-highlight"),e.addClass(t,"slow","",function(){e.removeClass(t,5e3)})},_removeRowsFromTable:function(t,i){var o=this;t.length<=0||(t.addClass("jtable-row-removed").remove(),t.each(function(){var t=o._findRowIndex(e(this));t>=0&&o._$tableRows.splice(t,1)}),o._onRowsRemoved(t,i),0==o._$tableRows.length&&o._addNoDataRow(),o._refreshRowStyles())},_findRowIndex:function(e){return this._findIndexInArray(e,this._$tableRows,function(e,t){return e.data("record")==t.data("record")})},_removeAllRows:function(e){if(!(this._$tableRows.length<=0)){var t=this._$tableBody.find("tr.jtable-data-row");this._$tableBody.empty(),this._$tableRows=[],this._onRowsRemoved(t,e),this._addNoDataRow()}},_addNoDataRow:function(){if(!(this._$tableBody.find(">tr.jtable-no-data-row").length>0)){var t=e("<tr></tr>").addClass("jtable-no-data-row").appendTo(this._$tableBody),i=this._$table.find("thead th").length;e("<td></td>").attr("colspan",i).html(this.options.messages.noDataAvailable).appendTo(t)}},_removeNoDataRow:function(){this._$tableBody.find(".jtable-no-data-row").remove()},_refreshRowStyles:function(){for(var e=0;e<this._$tableRows.length;e++)e%2==0?this._$tableRows[e].addClass("jtable-row-even"):this._$tableRows[e].removeClass("jtable-row-even")},_getDisplayTextForRecordField:function(e,t){var i=this.options.fields[t],o=e[t];if(i.display)return i.display({record:e});if("date"==i.type)return this._getDisplayTextForDateRecordField(i,o);if("checkbox"==i.type)return this._getCheckBoxTextForFieldByValue(t,o);if(i.options){var a=this._getOptionsForField(t,{record:e,value:o,source:"list",dependedValues:this._createDependedValuesUsingRecord(e,i.dependsOn)});return this._findOptionByValue(a,o).DisplayText}if(i.upload){var n=o.slice(o.lastIndexOf("/")+1);return"<a target='_blank' href='"+o+"'>"+n+"</a>"}return"link"==i.type?"http://"==o.substring(7)||"https://"==o.substring(8)?"<a href='"+o+"'>"+o+"</a>":"<a href='http://"+o+"'>"+o+"</a>":"password"==i.type?this._getDisplayTextPassword(i,o):o},_createDependedValuesUsingRecord:function(e,t){if(!t)return{};for(var i={},o=0;o<t.length;o++)i[t[o]]=e[t[o]];return i},_findOptionByValue:function(e,t){for(var i=0;i<e.length;i++)if(e[i].Value==t)return e[i];return{}},_getDisplayTextForDateRecordField:function(t,i){if(!i||""==i||"0000-00-00"==i)return"";var o=t.displayFormat||this.options.defaultDateFormat,a=this._parseDate(i);return e.datepicker.formatDate(o,a)},_getDisplayTextPassword:function(t,i){var o=e('<input type="password" readonly/>');return o.attr("value",i),o.on("contextmenu",this,function(){event.preventDefault(),"password"==this.type?e(this).attr("type","text"):e(this).attr("type","password")}),o},_getOptionsForField:function(t,i){var o=this.options.fields[t],a=o.options;e.isFunction(a)&&(i=e.extend(!0,{_cacheCleared:!1,dependedValues:{},clearCache:function(){this._cacheCleared=!0}},i),a=a(i));var n;if("string"==typeof a){var s="options_"+t+"_"+a;if(i._cacheCleared||!this._cache[s])this._cache[s]=this._buildOptionsFromArray(this._downloadOptions(t,a)),this._sortFieldOptions(this._cache[s],o.optionsSorting);else if(void 0!=i.value){var r=this._findOptionByValue(this._cache[s],i.value);void 0==r.DisplayText&&(this._cache[s]=this._buildOptionsFromArray(this._downloadOptions(t,a)),this._sortFieldOptions(this._cache[s],o.optionsSorting))}n=this._cache[s]}else jQuery.isArray(a)?(n=this._buildOptionsFromArray(a),this._sortFieldOptions(n,o.optionsSorting)):(n=this._buildOptionsArrayFromObject(a),this._sortFieldOptions(n,o.optionsSorting));return n},_downloadOptions:function(e,t){var i=this,o=[];return i._ajax({url:t,async:!1,success:function(e){return"OK"!=e.Result?void i._showError(e.Message):void(o=e.Options)},error:function(){var t=i._formatString(i.options.messages.cannotLoadOptionsFor,e);i._showError(t)}}),o},_sortFieldOptions:function(t,i){if(t&&t.length&&i){var o;o=0==i.indexOf("value")?function(e){return e.Value}:function(e){return e.DisplayText};var a;a="string"==e.type(o(t[0]))?function(e,t){return o(e).localeCompare(o(t))}:function(e,t){return o(e)-o(t)},t.sort(i.indexOf("desc")>0?function(e,t){return a(t,e)}:function(e,t){return a(e,t)})}},_buildOptionsArrayFromObject:function(t){var i=[];return e.each(t,function(e,t){i.push({Value:e,DisplayText:t})}),i},_buildOptionsFromArray:function(t){for(var i=[],o=0;o<t.length;o++)i.push(e.isPlainObject(t[o])?t[o]:{Value:t[o],DisplayText:t[o]});return i},_parseDate:function(e){return e.indexOf("Date")>=0?new Date(parseInt(e.substr(6),10)):10==e.length?new Date(parseInt(e.substr(0,4),10),parseInt(e.substr(5,2),10)-1,parseInt(e.substr(8,2),10)):19==e.length?new Date(parseInt(e.substr(0,4),10),parseInt(e.substr(5,2),10)-1,parseInt(e.substr(8,2,10)),parseInt(e.substr(11,2),10),parseInt(e.substr(14,2),10),parseInt(e.substr(17,2),10)):(this._logWarn('Given date is not properly formatted: "'+e+'"'),"format error!")},_createToolBar:function(){this._$toolbarDiv=e("<div />").addClass("jtable-toolbar").appendTo(this._$titleDiv);for(var t=0;t<this.options.toolbar.items.length;t++)this._addToolBarItem(this.options.toolbar.items[t])},_addToolBarItem:function(t){if(void 0==t||void 0==t.text&&void 0==t.icon)return this._logWarn("Can not add tool bar item since it is not valid!"),this._logWarn(t),null;var i=e("<span></span>").addClass("jtable-toolbar-item").appendTo(this._$toolbarDiv);if(this._jqueryuiThemeAddClass(i,"ui-widget ui-state-default ui-corner-all","ui-state-hover"),t.cssClass&&i.addClass(t.cssClass),t.tooltip&&i.attr("title",t.tooltip),t.icon){var o=e('<span class="jtable-toolbar-item-icon"></span>').appendTo(i);t.icon===!0||e.type("string"===t.icon)&&o.css("background",'url("'+t.icon+'")')}t.text&&e('<span class=""></span>').html(t.text).addClass("jtable-toolbar-item-text").appendTo(i),t.click&&i.click(function(){t.click()});var a=void 0,n=void 0;return this.options.toolbar.hoverAnimation&&(a=this.options.toolbar.hoverAnimationDuration,n=this.options.toolbar.hoverAnimationEasing),i.hover(function(){i.addClass("jtable-toolbar-item-hover",a,n)},function(){i.removeClass("jtable-toolbar-item-hover",a,n)}),i},_showError:function(e){this._$errorDialogDiv.html(e).dialog("open")},_setBusyTimer:null,_showBusy:function(e,t){var i=this;i._$busyDiv.width(i._$mainContainer.width()).height(i._$mainContainer.height()).addClass("jtable-busy-panel-background-invisible").show();var o=function(){i._$busyDiv.removeClass("jtable-busy-panel-background-invisible"),i._$busyMessageDiv.html(e).show()};if(t){if(i._setBusyTimer)return;i._setBusyTimer=setTimeout(o,t)}else o()},_hideBusy:function(){clearTimeout(this._setBusyTimer),this._setBusyTimer=null,this._$busyDiv.hide(),this._$busyMessageDiv.html("").hide()},_isBusy:function(){return this._$busyMessageDiv.is(":visible")},_jqueryuiThemeAddClass:function(e,t,i){this.options.jqueryuiTheme&&(e.addClass(t),i&&e.hover(function(){e.addClass(i)},function(){e.removeClass(i)}))},_bootstrapThemeAddClass:function(e,t,i){this.options.bootstrapTheme&&(e.addClass(t),i&&e.hover(function(){e.addClass(i)},function(){e.removeClass(i)}))},_performAjaxCall:function(e,t,i,o,a){this._ajax({url:e,data:t,async:i,success:o,error:a})},_unAuthorizedRequestHandler:function(){this.options.unAuthorizedRequestRedirectUrl?location.href=this.options.unAuthorizedRequestRedirectUrl:location.reload(!0)},_ajax:function(i){var o=this,a={statusCode:{401:function(){o._unAuthorizedRequestHandler()}}};a=e.extend(a,this.options.ajaxSettings,i),a.success=function(e){e&&1==e.UnAuthorizedRequest&&o._unAuthorizedRequestHandler(),i.success&&i.success(e)},a.error=function(e){return t?void e.abort():void(i.error&&i.error(arguments))},a.complete=function(){i.complete&&i.complete()},e.ajax(a)},_getKeyValueOfRecord:function(e){return e[this._keyField]},_setCookie:function(e,t){e=this._cookieKeyPrefix+e;var i=new Date;i.setDate(i.getDate()+31536e7),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; expires="+i.toUTCString()},_getCookie:function(e){e=this._cookieKeyPrefix+e;for(var t=document.cookie.split("; "),i=0;i<t.length;i++)if(t[i]){var o=t[i].split("=");if(2==o.length&&decodeURIComponent(o[0])===e)return decodeURIComponent(o[1]||"")}return null},_generateCookieKeyPrefix:function(){var e=function(e){var t=0;if(0==e.length)return t;for(var i=0;i<e.length;i++){var o=e.charCodeAt(i);t=(t<<5)-t+o,t&=t}return t},t="";return this.options.tableId&&(t=t+this.options.tableId+"#"),t=t+this._columnList.join("$")+"#c"+this._$table.find("thead th").length,"jtable#"+e(t)},_onLoadingRecords:function(){this._trigger("loadingRecords",null,{})},_onRecordsLoaded:function(e){this._trigger("recordsLoaded",null,{records:e.Records,serverResponse:e})},_onRowInserted:function(e,t){this._trigger("rowInserted",null,{row:e,record:e.data("record"),isNewRow:t})},_onRowsRemoved:function(e,t){this._trigger("rowsRemoved",null,{rows:e,reason:t})},_onCloseRequested:function(){this._trigger("closeRequested",null,{})}})}(jQuery),function(e){var t={_create:e.hik.jtable.prototype._create};e.extend(!0,e.hik.jtable.prototype,{options:{recordAdded:function(){},messages:{addNewRecord:"Add new record"},validationOptions:{promptPosition:"bottomRight",autoPositionUpdate:!0}},_$addRecordDiv:null,_create:function(){t._create.apply(this,arguments),this.options.actions.createAction&&this._createAddRecordDialogDiv()},_createAddRecordDialogDiv:function(){var t=this;t._$addRecordDiv=e("<div />").appendTo(t._$mainContainer),t._$addRecordDiv.dialog({appendTo:t._$mainContainer,autoOpen:!1,show:t.options.dialogShowEffect,hide:t.options.dialogHideEffect,width:"auto",minWidth:"300",modal:!0,title:t.options.messages.addNewRecord,buttons:[{text:t.options.messages.cancel,click:function(){t._$addRecordDiv.dialog("close")}},{id:"AddRecordDialogSaveButton",text:t.options.messages.save,click:function(){t._onSaveClickedOnCreateForm()}}],close:function(){var e=t._$addRecordDiv.find("form").first(),i=t._$addRecordDiv.parent().find("#AddRecordDialogSaveButton");e.validationEngine("hide"),e.validationEngine("detach"),t._trigger("formClosed",null,{form:e,formType:"create"}),t._setEnabledOfDialogButton(i,!0,t.options.messages.save),e.remove()}}),t.options.addRecordButton?t.options.addRecordButton.click(function(e){e.preventDefault(),t._showAddRecordForm()}):t._addToolBarItem({icon:!0,cssClass:"jtable-toolbar-item-add-record",text:t.options.messages.addNewRecord,click:function(){t._showAddRecordForm()}})},_onSaveClickedOnCreateForm:function(){var e=this,t=e._$addRecordDiv.parent().find("#AddRecordDialogSaveButton"),i=e._$addRecordDiv.find("form");0!=e._trigger("formSubmitting",null,{form:i,formType:"create"})&&i.validationEngine("validate")&&(e._setEnabledOfDialogButton(t,!1,e.options.messages.saving),e._saveAddRecordForm(i,t))},showCreateForm:function(){this._showAddRecordForm()},addRecord:function(t){var i=this;if(t=e.extend({clientOnly:!1,animationsEnabled:i.options.animationsEnabled,success:function(){},error:function(){}},t),!t.record)return void i._logWarn("options parameter in addRecord method must contain a record property.");if(t.clientOnly)return i._addRow(i._createRowFromRecord(t.record),{isNewRow:!0,animationsEnabled:t.animationsEnabled}),void t.success();var o=function(e){return"OK"!=e.Result?(i._showError(e.Message),void t.error(e)):e.Record?(i._onRecordAdded(e),i._addRow(i._createRowFromRecord(e.Record),{isNewRow:!0,animationsEnabled:t.animationsEnabled}),void t.success(e)):(i._logError("Server must return the created Record object."),void t.error(e))};if(!t.url&&e.isFunction(i.options.actions.createAction)){var a=i.options.actions.createAction(e.param(t.record));i._isDeferredObject(a)?a.done(function(e){o(e)}).fail(function(){i._showError(i.options.messages.serverCommunicationError),t.error()}):o(a)}else i._submitFormUsingAjax(t.url||i.options.actions.createAction,e.param(t.record),function(e){o(e)},function(){i._showError(i.options.messages.serverCommunicationError),t.error()})},_showAddRecordForm:function(){for(var t=this,i=e('<form id="jtable-create-form" class="jtable-dialog-form jtable-create-form"></form>'),o=0;o<t._fieldList.length;o++){var a=t._fieldList[o],n=t.options.fields[a];if((1!=n.key||1==n.create)&&0!=n.create)if("hidden"!=n.type){var s=e("<div />").addClass("jtable-input-field-container").appendTo(i);s.append(t._createInputLabelForRecordField(a)),s.append(t._createInputForRecordField({fieldName:a,formType:"create",form:i}))}else i.append(t._createInputForHidden(a,n.defaultValue))}t._makeCascadeDropDowns(i,void 0,"create"),i.submit(function(){return t._onSaveClickedOnCreateForm(),!1}),t._$addRecordDiv.append(i).dialog("open"),e("#jtable-create-form").validationEngine("attach",{promptPosition:t.options.validationOptions.promptPosition,autoPositionUpdate:t.options.validationOptions.autoPositionUpdate}),t._trigger("formCreated",null,{form:i,formType:"create"})},_saveAddRecordForm:function(t,i){var o=this,a=function(e){return"OK"!=e.Result?(o._showError(e.Message),void o._setEnabledOfDialogButton(i,!0,o.options.messages.save)):e.Record?(o._onRecordAdded(e),o._addRow(o._createRowFromRecord(e.Record),{isNewRow:!0}),void o._$addRecordDiv.dialog("close")):(o._logError("Server must return the created Record object."),void o._setEnabledOfDialogButton(i,!0,o.options.messages.save))};if(t.data("submitting",!0),e.isFunction(o.options.actions.createAction)){var n=o.options.actions.createAction(t.serialize());o._isDeferredObject(n)?n.done(function(e){a(e)}).fail(function(){o._showError(o.options.messages.serverCommunicationError),o._setEnabledOfDialogButton(i,!0,o.options.messages.save)}):a(n)}else o._submitFormUsingAjax(o.options.actions.createAction,t.serialize(),function(e){a(e)},function(){o._showError(o.options.messages.serverCommunicationError),o._setEnabledOfDialogButton(i,!0,o.options.messages.save)})},_onRecordAdded:function(e){this._trigger("recordAdded",null,{record:e.Record,serverResponse:e})}})}(jQuery),function(e){var t={_create:e.hik.jtable.prototype._create,_addColumnsToHeaderRow:e.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:e.hik.jtable.prototype._addCellsToRowUsingRecord};e.extend(!0,e.hik.jtable.prototype,{options:{recordUpdated:function(){},rowUpdated:function(){},messages:{editRecord:"Edit Record"},validationOptions:{promptPosition:"bottomRight",autoPositionUpdate:!0}},_$editDiv:null,_$editingRow:null,_create:function(){t._create.apply(this,arguments),this.options.actions.updateAction&&this._createEditDialogDiv()
},_createEditDialogDiv:function(){var t=this;t._$editDiv=e("<div></div>").appendTo(t._$mainContainer),t._$editDiv.dialog({appendTo:t._$mainContainer,autoOpen:!1,show:t.options.dialogShowEffect,hide:t.options.dialogHideEffect,width:"auto",minWidth:"300",modal:!0,title:t.options.messages.editRecord,buttons:[{text:t.options.messages.cancel,click:function(){t._$editDiv.dialog("close")}},{id:"EditDialogSaveButton",text:t.options.messages.save,click:function(){t._onSaveClickedOnEditForm()}}],close:function(){var e=t._$editDiv.find("form:first"),i=t._$editDiv.parent().find("#EditDialogSaveButton");e.validationEngine("hide"),e.validationEngine("detach"),t._trigger("formClosed",null,{form:e,formType:"edit",row:t._$editingRow}),t._setEnabledOfDialogButton(i,!0,t.options.messages.save),e.remove()}})},_onSaveClickedOnEditForm:function(){var e=this;if(e._$editingRow.hasClass("jtable-row-removed"))return void e._$editDiv.dialog("close");var t=e._$editDiv.parent().find("#EditDialogSaveButton"),i=e._$editDiv.find("form");0!=e._trigger("formSubmitting",null,{form:i,formType:"edit",row:e._$editingRow})&&i.validationEngine("validate")&&(e._setEnabledOfDialogButton(t,!1,e.options.messages.saving),e._saveEditForm(i,t))},updateRecord:function(t){var i=this;if(t=e.extend({clientOnly:!1,animationsEnabled:i.options.animationsEnabled,success:function(){},error:function(){}},t),!t.record)return void i._logWarn("options parameter in updateRecord method must contain a record property.");var o=i._getKeyValueOfRecord(t.record);if(void 0==o||null==o)return void i._logWarn("options parameter in updateRecord method must contain a record that contains the key field property.");var a=i.getRowByKey(o);if(null==a)return void i._logWarn('Can not found any row by key "'+o+'" on the table. Updating row must be visible on the table.');if(t.clientOnly)return e.extend(a.data("record"),t.record),i._updateRowTexts(a),i._onRecordUpdated(a,null),t.animationsEnabled&&i._showUpdateAnimationForRow(a),void t.success();var n=function(o){return"OK"!=o.Result?(i._showError(o.Message),void t.error(o)):(e.extend(a.data("record"),t.record),i._updateRecordValuesFromServerResponse(a.data("record"),o),i._updateRowTexts(a),i._onRecordUpdated(a,o),t.animationsEnabled&&i._showUpdateAnimationForRow(a),void t.success(o))};if(!t.url&&e.isFunction(i.options.actions.updateAction)){var s=i.options.actions.updateAction(e.param(t.record));i._isDeferredObject(s)?s.done(function(e){n(e)}).fail(function(){i._showError(i.options.messages.serverCommunicationError),t.error()}):n(s)}else i._submitFormUsingAjax(t.url||i.options.actions.updateAction,e.param(t.record),function(e){n(e)},function(){i._showError(i.options.messages.serverCommunicationError),t.error()})},_addColumnsToHeaderRow:function(e){t._addColumnsToHeaderRow.apply(this,arguments),void 0!=this.options.actions.updateAction&&e.append(this._createEmptyCommandHeader())},_addCellsToRowUsingRecord:function(i){var o=this;if(t._addCellsToRowUsingRecord.apply(this,arguments),void 0!=o.options.actions.updateAction){var a=e("<span></span>").html(o.options.messages.editRecord),n=e('<button title="'+o.options.messages.editRecord+'"></button>').addClass("jtable-command-button jtable-edit-command-button").append(a).click(function(e){e.preventDefault(),e.stopPropagation(),o._showEditForm(i)});e("<td></td>").addClass("jtable-command-column").append(n).appendTo(i)}},_showEditForm:function(t){for(var i=this,o=t.data("record"),a=e('<form id="jtable-edit-form" class="jtable-dialog-form jtable-edit-form"></form>'),n=0;n<i._fieldList.length;n++){var s=i._fieldList[n],r=i.options.fields[s],l=o[s];if(1==r.key){if(1!=r.edit){a.append(i._createInputForHidden(s,l));continue}a.append(i._createInputForHidden("jtRecordKey",l))}if(0!=r.edit)if("hidden"!=r.type){var d=e('<div class="jtable-input-field-container"></div>').appendTo(a);d.append(i._createInputLabelForRecordField(s));var c=i._getValueForRecordField(o,s),c=i._getValueForRecordField(o,s);d.append(i._createInputForRecordField({fieldName:s,value:c,record:o,formType:"edit",form:a}))}else a.append(i._createInputForHidden(s,l))}i._makeCascadeDropDowns(a,o,"edit"),a.submit(function(){return i._onSaveClickedOnEditForm(),!1}),i._$editingRow=t,i._$editDiv.append(a).dialog("open"),e("#jtable-edit-form").validationEngine("attach",{promptPosition:i.options.validationOptions.promptPosition,autoPositionUpdate:i.options.validationOptions.autoPositionUpdate}),i._trigger("formCreated",null,{form:a,formType:"edit",record:o,row:t})},_saveEditForm:function(t,i){var o=this,a=function(e){if("OK"!=e.Result)return o._showError(e.Message),void o._setEnabledOfDialogButton(i,!0,o.options.messages.save);var a=o._$editingRow.data("record");o._updateRecordValuesFromForm(a,t),o._updateRecordValuesFromServerResponse(a,e),o._updateRowTexts(o._$editingRow),o._$editingRow.attr("data-record-key",o._getKeyValueOfRecord(a)),o._onRecordUpdated(o._$editingRow,e),o.options.animationsEnabled&&o._showUpdateAnimationForRow(o._$editingRow),o._$editDiv.dialog("close")};if(e.isFunction(o.options.actions.updateAction)){var n=o.options.actions.updateAction(t.serialize());o._isDeferredObject(n)?n.done(function(e){a(e)}).fail(function(){o._showError(o.options.messages.serverCommunicationError),o._setEnabledOfDialogButton(i,!0,o.options.messages.save)}):a(n)}else o._submitFormUsingAjax(o.options.actions.updateAction,t.serializeWithChkBox(),function(e){a(e)},function(){o._showError(o.options.messages.serverCommunicationError),o._setEnabledOfDialogButton(i,!0,o.options.messages.save)})},_updateRecordValuesFromServerResponse:function(t,i){i&&i.Record&&e.extend(!0,t,i.Record)},_getValueForRecordField:function(e,t){var i=this.options.fields[t],o=e[t];return"date"==i.type?this._getDisplayTextForDateRecordField(i,o):o},_updateRowTexts:function(e){for(var t=e.data("record"),i=e.find("td"),o=0;o<this._columnList.length;o++){var a=this._getDisplayTextForRecordField(t,this._columnList[o]);""!=a&&0==a&&(a="0"),i.eq(this._firstDataColumnOffset+o).html(a||"")}this._onRowUpdated(e)},_showUpdateAnimationForRow:function(e){var t="jtable-row-updated";this.options.jqueryuiTheme&&(t+=" ui-state-highlight"),e.stop(!0,!0).addClass(t,"slow","",function(){e.removeClass(t,5e3)})},_onRowUpdated:function(e){this._trigger("rowUpdated",null,{row:e,record:e.data("record")})},_onRecordUpdated:function(e,t){this._trigger("recordUpdated",null,{record:e.data("record"),row:e,serverResponse:t})}})}(jQuery),function(e){var t={_create:e.hik.jtable.prototype._create,_addColumnsToHeaderRow:e.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:e.hik.jtable.prototype._addCellsToRowUsingRecord};e.extend(!0,e.hik.jtable.prototype,{options:{duplicateConfirmation:!0,recordDuplicated:function(){},messages:{duplicateConfirmation:"This record will be duplicated. Are you sure?",duplicateText:"Duplicate",deleting:"Duplicating",canNotDuplicatedRecords:"Can not duplicate {0} of {1} records!",duplicateProggress:"Duplicating {0} of {1} records, processing..."}},_$duplicateRecordDiv:null,_$deletingRow:null,_create:function(){t._create.apply(this,arguments),this._createDuplicateDialogDiv()},_createDuplicateDialogDiv:function(){var t=this;t.options.actions.duplicateAction&&(t._$duplicateRecordDiv=e('<div><p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span><span class="jtable-duplicate-confirm-message"></span></p></div>').appendTo(t._$mainContainer),t._$duplicateRecordDiv.dialog({appendTo:t._$mainContainer,autoOpen:!1,show:t.options.dialogShowEffect,hide:t.options.dialogHideEffect,modal:!0,title:t.options.messages.areYouSure,buttons:[{text:t.options.messages.cancel,click:function(){t._$duplicateRecordDiv.dialog("close")}},{id:"DuplicateDialogButton",text:t.options.messages.duplicateText,click:function(){if(t._$deletingRow.hasClass("jtable-row-removed"))return void t._$duplicateRecordDiv.dialog("close");var e=t._$duplicateRecordDiv.parent().find("#DuplicateDialogButton");t._setEnabledOfDialogButton(e,!1,t.options.messages.deleting),t._duplicateRecordFromServer(t._$deletingRow,function(){t._removeRowsFromTableWithAnimation(t._$deletingRow),t._$duplicateRecordDiv.dialog("close")},function(i){t._showError(i),t._setEnabledOfDialogButton(e,!0,t.options.messages.duplicateText)})}}],close:function(){var e=t._$duplicateRecordDiv.parent().find("#DuplicateDialogButton");t._setEnabledOfDialogButton(e,!0,t.options.messages.duplicateText)}}))},duplicateRows:function(t){var i=this;if(t.length<=0)return void i._logWarn("No rows specified to jTable duplicateRows method.");if(i._isBusy())return void i._logWarn("Can not duplicate rows since jTable is busy!");if(1==t.length)return void i._duplicateRecordFromServer(t,function(){i._removeRowsFromTableWithAnimation(t)},function(e){i._showError(e)});i._showBusy(i._formatString(i.options.messages.duplicateProggress,0,t.length));var o=0,a=function(){return o>=t.length},n=function(){var e=t.filter(".jtable-row-ready-to-remove");e.length<t.length&&i._showError(i._formatString(i.options.messages.canNotDuplicatedRecords,t.length-e.length,t.length)),e.length>0&&i._removeRowsFromTableWithAnimation(e),i._hideBusy()},s=0;t.each(function(){var r=e(this);i._duplicateRecordFromServer(r,function(){++s,++o,r.addClass("jtable-row-ready-to-remove"),i._showBusy(i._formatString(i.options.messages.duplicateProggress,s,t.length)),a()&&n()},function(){++o,a()&&n()})})},duplicateRecord:function(t){var i=this;if(t=e.extend({clientOnly:!1,animationsEnabled:i.options.animationsEnabled,url:i.options.actions.duplicateAction,success:function(){},error:function(){}},t),void 0==t.key)return void i._logWarn("options parameter in duplicateRecord method must contain a key property.");var o=i.getRowByKey(t.key);return null==o?void i._logWarn("Can not found any row by key: "+t.key):t.clientOnly?(i._removeRowsFromTableWithAnimation(o,t.animationsEnabled),void t.success()):void i._duplicateRecordFromServer(o,function(e){i._removeRowsFromTableWithAnimation(o,t.animationsEnabled),t.success(e)},function(e){i._showError(e),t.error(e)},t.url)},_addColumnsToHeaderRow:function(e){t._addColumnsToHeaderRow.apply(this,arguments),void 0!=this.options.actions.duplicateAction&&e.append(this._createEmptyCommandHeader())},_addCellsToRowUsingRecord:function(i){t._addCellsToRowUsingRecord.apply(this,arguments);var o=this;if(void 0!=o.options.actions.duplicateAction){var a=e("<span></span>").html(o.options.messages.duplicateText),n=e('<button title="'+o.options.messages.duplicateText+'"></button>').addClass("jtable-command-button jtable-duplicate-command-button").append(a).click(function(e){e.preventDefault(),e.stopPropagation(),o._duplicateButtonClickedForRow(i)});e("<td></td>").addClass("jtable-command-column").append(n).appendTo(i)}},_duplicateButtonClickedForRow:function(t){var i,o=this,a=o.options.messages.duplicateConfirmation;if(e.isFunction(o.options.duplicateConfirmation)){var n={row:t,record:t.data("record"),duplicateConfirm:!0,duplicateConfirmMessage:a,cancel:!1,cancelMessage:null};if(o.options.duplicateConfirmation(n),n.cancel)return void(n.cancelMessage&&o._showError(n.cancelMessage));a=n.duplicateConfirmMessage,i=n.duplicateConfirm}else i=o.options.duplicateConfirmation;0!=i?(o._$duplicateRecordDiv.find(".jtable-duplicate-confirm-message").html(a),o._showDuplicateDialog(t)):o._duplicateRecordFromServer(t,function(){o._removeRowsFromTableWithAnimation(t)},function(e){o._showError(e)})},_showDuplicateDialog:function(e){this._$deletingRow=e,this._$duplicateRecordDiv.dialog("open")},_duplicateRecordFromServer:function(t,i,o,a){var n=this,s=function(e){return"OK"!=e.Result?(t.data("deleting",!1),void(o&&o(e.Message))):(n._trigger("recordDuplicated",null,{record:t.data("record"),row:t,serverResponse:e}),void(i&&i(e)))};if(1!=t.data("deleting")){t.data("deleting",!0);var r={};if(r[n._keyField]=n._getKeyValueOfRecord(t.data("record")),!a&&e.isFunction(n.options.actions.duplicateAction)){var l=n.options.actions.duplicateAction(r);n._isDeferredObject(l)?l.done(function(e){s(e)}).fail(function(){t.data("deleting",!1),o&&o(n.options.messages.serverCommunicationError)}):s(l)}else this._ajax({url:a||n.options.actions.duplicateAction,data:r,success:function(e){s(e)},error:function(){t.data("deleting",!1),o&&o(n.options.messages.serverCommunicationError)}})}},_removeRowsFromTableWithAnimation:function(e,t){var i=this;if(void 0==t&&(t=i.options.animationsEnabled),t){var o="jtable-row-deleting";this.options.jqueryuiTheme&&(o+=" ui-state-disabled"),e.stop(!0,!0).addClass(o,"slow","").promise().done(function(){i._removeRowsFromTable(e,"duplicated")})}else i._removeRowsFromTable(e,"duplicated")}})}(jQuery),function(e){var t={_createCellForRecordField:e.hik.jtable.prototype._createCellForRecordField,_updateRowTexts:e.hik.jtable.prototype._updateRowTexts};e.extend(!0,e.hik.jtable.prototype,{options:{editinline:{enable:!1,img:"../scripts/jtable/content/"},messages:{required:"Required field"}},_createCellForRecordField:function(i,o){t._createCellForRecordField.apply(this,arguments),this.options.fields[o];return e("<td></td>").addClass(this.options.fields[o].listClass).append(1==this.options.editinline.enable&&0!=this.options.fields[o].edit&&void 0!=this.options.actions.updateAction?this._getDisplayTextEditInline(i,o):this._getDisplayTextForRecordField(i,o))},_updateRowTexts:function(e){var t=e.data("record"),i=e.find("td");if(1==this.options.editinline.enable)for(var o=0;o<this._columnList.length;o++){var a=this._getDisplayTextEditInline(t,this._columnList[o]);i.eq(this._firstDataColumnOffset+o).html(a||"")}else for(var o=0;o<this._columnList.length;o++){var a=this._getDisplayTextForRecordField(t,this._columnList[o]);""!=a&&0==a&&(a="0"),i.eq(this._firstDataColumnOffset+o).html(a||"")}this._onRowUpdated(e)},_getDisplayTextEditInline:function(e,t){var i=this.options.fields[t],o=e[t];if(i.display)return i.display({record:e});if("date"==i.type)return this._editInline_date(e,t);if("textarea"==i.type)return this._editInline_textarea(e,t);if("number"==i.type)return this._editInline_number(e,t);if("password"==i.type)return this._editInline_password(e,t);if("checkbox"==i.type)return this._editInline_checkbox(e,t);if(i.options){var a=this._getOptionsForField(t,{record:e,value:o,source:"list",dependedValues:this._createDependedValuesUsingRecord(e,i.dependsOn)}),n=this;return"multiselect"==i.type?this._editInline_optionsMulti(a,o,e,t,i,n):this._editInline_options(a,o,e,t,i,n)}if(i.upload){var s=o.slice(o.lastIndexOf("/")+1);return"<a target='_blank' href='"+o+"'>"+s+"</a>"}return i.geocomplete?this._editInline_geoComplete(e,t):this._editInline_default(e,t)},_editInline_options:function(t,i,o,a,n,s){var r=this,l=i,d="",c=e("<select></select>");c.css("background-repeat","no-repeat"),c.css("background-position","right center");for(var u=0;u<t.length;u++)t[u].Value==i&&(d=t[u].DisplayText);var p=d?d:" - - - ",h=e("<span>"+p+"</span>");return h.dblclick(function(){var t=s._getOptionsForField(a,{record:o,value:o[a],source:"edit",dependedValues:s._createDependedValuesUsingRecord(o,n.dependsOn)});c.remove(),c=e("<select></select>"),r._bootstrapThemeAddClass(c,"form-control");for(var d=0;d<t.length;d++)c.append('<option value="'+t[d].Value+'"'+(t[d].Value==i?' selected="selected"':"")+">"+t[d].DisplayText+"</option>");e(this).children().length<1&&(c.val(l),e(this).html(c),c.bind("change blur focusout",function(){e(this).css("background-image",'url("'+r.options.editinline.img+'loading.gif")');var t={};t[a]=e(this).val(),t[r._keyField]=o[r._keyField],r._editInline_ajax(t)&&(l=e(this).val(),h.html(""!=e(this).find("option:selected").text()?e(this).find("option:selected").text():" - - - "),o[a]=e(this).val(),e(this).css("background","none"),r._showUpdateAnimationForRow(h.closest("tr")))}),c.focus())}),h},_editInline_optionsMulti:function(t,i,o,a,n,s){var r=this,l=i,d="",c=e("<select></select>");c.css("background-repeat","no-repeat"),c.css("background-position","right center");for(var u=0;u<t.length;u++)t[u].Value==i&&(d=t[u].DisplayText);var p=d?d:" - - - ",h=e("<span>"+p+"</span>");return h.dblclick(function(){var t=s._getOptionsForField(a,{record:o,value:o[a],source:"edit",dependedValues:s._createDependedValuesUsingRecord(o,n.dependsOn)});c.remove(),c=e("<select multiple></select>"),c.attr("name",a+"[]"),r._bootstrapThemeAddClass(c,"form-control");for(var d=0;d<t.length;d++)c.append('<option value="'+t[d].Value+'"'+(t[d].Value==i?' selected="selected"':"")+">"+t[d].DisplayText+"</option>");e(this).children().length<1&&(c.val(l),e(this).html(c),c.bind("change blur focusout",function(){e(this).css("background-image",'url("'+r.options.editinline.img+'loading.gif")');var t={};t[a]=e(this).val(),t[r._keyField]=o[r._keyField],r._editInline_ajax(t)&&(l=e(this).val(),h.html(""!=e(this).find("option:selected").text()?e(this).find("option:selected").text():" - - - "),o[a]=e(this).val(),e(this).css("background","none"),r._showUpdateAnimationForRow(h.closest("tr")))}),c.focus())}),h},_editInline_date:function(t,i){var o=this,a=this.options.fields[i],n=t[i],s=a.displayFormat||this.options.defaultDateFormat,r=""!=n&&"0000-00-00"!=n?e.datepicker.formatDate(s,this._parseDate(n)):"&nbsp;&nbsp;&nbsp;",l=e("<span>"+r+"</span>"),d=function(e){if(""==e||null==e||void 0==e)return"";var t=e.substr(6,4),i=e.substr(3,2);return e=e.substr(0,2),t+"-"+i+"-"+e};return l.dblclick(function(){if(e(this).children().length<1){var n=e('<input type="text" value="'+e(this).html().trim()+'" />');o._bootstrapThemeAddClass(n,"form-control"),n.css("background-repeat","no-repeat"),n.css("background-position","right center"),n.addClass(a.inputClass),e(this).html(n),e(this).mask("dd-mm-yy"==s.toLowerCase()?"99-99-9999":"9999-99-99"),a.required&&(e(this).attr("title",o.options.messages.required),e(this).append("<b><i>"+o.options.messages.required+"</i></b>")),n.datepicker({dateFormat:s,changeMonth:!0,changeYear:!0,onClose:function(){e(this).css("background-image","url("+o.options.editinline.img+"loading.gif)");var a={};a[i]=e(this).val(),a[o._keyField]=t[o._keyField],o._editInline_ajax(a)&&(l.html(e(this).val()),t[i]="dd-mm-yy"==s.toLowerCase()?d(e(this).val()):e(this).val(),e(this).css("background","none"),o._showUpdateAnimationForRow(l.closest("tr")))}}),n.focus()}}),l},_editInline_checkbox:function(t,i){var o=this,a=(this.options.fields[i],t[i]),n=e(0!=a?'<img val="1" style="cursor:pointer;" src="'+this.options.editinline.img+'apply.png"></img>':'<img val="0" style="cursor:pointer;" src="'+this.options.editinline.img+'cross.png"></img>');return n.dblclick(function(){var a={};a[i]=0!=e(this).attr("val")?0:1,a[o._keyField]=t[o._keyField],o._editInline_ajax(a)&&("0"==e(this).attr("val")?(t[i]=1,e(this).attr("title","click to uncheck"),e(this).attr("val","1"),e(this).attr("src",o.options.editinline.img+"apply.png")):(t[i]=0,e(this).attr("title","click to check"),e(this).attr("val","0"),e(this).attr("src",o.options.editinline.img+"cross.png")),o._showUpdateAnimationForRow(n.closest("tr")))}),n},_editInline_textarea:function(t,i){var o=this,a=this.options.fields[i],n=t[i],s=n?n:"&nbsp;&nbsp;&nbsp;",r=e("<span>"+s+"</span>");return r.dblclick(function(){if(e(this).children().length<1){var n=e("<textarea>"+e(this).html()+"</textarea>");o._bootstrapThemeAddClass(n,"form-control"),n.css("background-repeat","no-repeat"),n.css("background-position","right center"),n.addClass(a.inputClass),a.addMask&&n.mask(a.addMask),e(this).html(n),a.required&&e(this).append("<b><i>"+o.options.messages.required+"</i></b>"),n.bind("change blur focusout",function(){if(""==e(this).val().trim()&&a.required)e(this).attr("title",o.options.messages.required);else{e(this).css("background-image",'url("'+o.options.editinline.img+'loading.gif")');var n={};n[i]=e(this).val().trim(),n[o._keyField]=t[o._keyField],o._editInline_ajax(n)&&(r.html(e(this).val().trim()+"&nbsp;&nbsp;&nbsp;&nbsp;"),t[i]=e(this).val().trim(),e(this).css("background","none"),o._showUpdateAnimationForRow(r.closest("tr")))}}),n.focus()}}),r},_editInline_default:function(t,i){var o=this,a=this.options.fields[i],n=t[i],s=n?n:"&nbsp;&nbsp;&nbsp;&nbsp;",r=e("<div style='width:auto'>"+s+"</div>");return r.dblclick(function(){if(e(this).children().length<1){var n=e('<input type="text" '+a.inputAttr+' style="'+a.inputCss+'" value="'+e(this).html()+'"/>');o._bootstrapThemeAddClass(n,"form-control"),n.css("background-repeat","no-repeat"),n.css("background-position","right center"),n.addClass(a.inputClass),a.addMask&&n.mask(a.addMask),e(this).html(n),a.required&&e(this).append("<b><i>"+o.options.messages.required+"</i></b>"),n.bind("change blur focusout",function(){if(""==e(this).val().trim()&&a.required)e(this).attr("title",o.options.messages.required);else{e(this).css("background-image",'url("'+o.options.editinline.img+'loading.gif")');var n={};n[i]=e(this).val().trim(),n[o._keyField]=t[o._keyField],o._editInline_ajax(n)&&(r.html(e(this).val().trim()+"&nbsp;&nbsp;&nbsp;&nbsp;"),t[i]=e(this).val().trim(),e(this).css("background","none"),o._showUpdateAnimationForRow(r.closest("tr")))}}),n.focus()}}),r},_editInline_geoComplete:function(t,i){var o=this,a=this.options.fields[i],n=t[i],s=n?n:"&nbsp;&nbsp;&nbsp;&nbsp;",r=e("<div style='width:auto'>"+s+"</div>");return r.dblclick(function(){if(e(this).children().length<1){var n=e(this).html(),s=e('<input type="text" value="'+n+'"/>');o._bootstrapThemeAddClass(s,"form-control"),s.css("background-repeat","no-repeat"),s.css("background-position","right center"),s.addClass(a.inputClass);var l=e("<div>");l.attr("id","myMap"),l.css({height:400,width:400}),a.addMask&&s.mask(a.addMask),e(this).html(s),e(this).append(l),s.geocomplete({map:"#myMap",find:"Paris, France",markerOptions:{draggable:!1},location:n}),a.required&&e(this).append("<b><i>"+o.options.messages.required+"</i></b>"),s.on("keypress",function(n){if(13==n.which)if(""==e(this).val().trim()&&a.required)e(this).attr("title",o.options.messages.required);else{e(this).css("background-image",'url("'+o.options.editinline.img+'loading.gif")');var s={};s[i]=e(this).val().trim(),s[o._keyField]=t[o._keyField],o._editInline_ajax(s)&&(r.html(e(this).val().trim()+"&nbsp;&nbsp;&nbsp;&nbsp;"),t[i]=e(this).val().trim(),e(this).css("background","none"),o._showUpdateAnimationForRow(r.closest("tr")))}}),s.focus()}}),r},_editInline_number:function(t,i){var o=this,a=this.options.fields[i],n=t[i],s=n?n:"&nbsp;&nbsp;&nbsp;",r=e("<span>"+s+"</span>");return r.dblclick(function(){if(e(this).children().length<1){var n=e('<input type="number" value="'+e(this).html()+'"/>');o._bootstrapThemeAddClass(n,"form-control"),n.css("background-repeat","no-repeat"),n.css("background-position","right center"),e(this).html(n),a.required&&e(this).append("<b><i>"+o.options.messages.required+"</i></b>"),e(this).numeric(","),n.bind("blur focusout",function(){if(""==e(this).val().trim()&&a.required)e(this).attr("title",o.options.messages.required);else{e(this).css("background-image",'url("'+o.options.editinline.img+'loading.gif")');var n={};n[i]=e(this).val(),n[o._keyField]=t[o._keyField],o._editInline_ajax(n)&&(r.html(e(this).val().trim()+"&nbsp;&nbsp;&nbsp;&nbsp;"),t[i]=e(this).val(),e(this).css("background","none"),o._showUpdateAnimationForRow(r.closest("tr")))}}),n.focus()}}),r},_editInline_password:function(t,i){var o=this,a=this.options.fields[i],n=t[i],s=n?n:"&nbsp;&nbsp;&nbsp;&nbsp;",r=e("<div style='width:auto' name=\"cache\"> * * * * * </div>");return r.dblclick(function(){if(e(this).children().length<1){var n=e('<input type="password" value="'+e(this).html()+'"/>');o._bootstrapThemeAddClass(n,"form-control"),n.css("background-repeat","no-repeat"),n.css("background-position","right center"),n.addClass(a.inputClass),a.addMask&&n.mask(a.addMask),e(this).html(n),a.required&&e(this).append("<b><i>"+o.options.messages.required+"</i></b>"),n.bind("change blur focusout",function(){if(""==e(this).val().trim()&&a.required)e(this).attr("title",o.options.messages.required);else{e(this).css("background-image",'url("'+o.options.editinline.img+'loading.gif")');var n={};n[i]=e(this).val().trim(),n[o._keyField]=t[o._keyField],o._editInline_ajax(n)&&(r.html(e(this).val().trim()+"&nbsp;&nbsp;&nbsp;&nbsp;"),t[i]=e(this).val().trim(),e(this).css("background","none"),o._showUpdateAnimationForRow(r.closest("tr")))}}),n.focus()}}),r.bind("contextmenu",this,function(){event.preventDefault(),"cache"==e(this).attr("name")?(e(this).html(s),e(this).attr("name","uncache")):(e(this).html(" * * * * * "),e(this).attr("name","cache"))}),r},_editInline_link:function(t,i){var o=this,a=this.options.fields[i],n=t[i],s=n?n:"&nbsp;&nbsp;&nbsp;&nbsp;";if("http://"==n.substring(7)||"https://"==n.substring(8))var r=e("<div style='width:auto'><a href=\""+s+'">'+s+"</a></div>");else var r=e("<div style='width:auto'><a href=\"http://"+s+'">'+s+"</a></div>");return r.children().click(function(t){"&nbsp;&nbsp;&nbsp;&nbsp;"==e(this).html()?t.preventDefault():window.open(r.children().href(),"_blank")}),r.children().on("contextmenu",this,function(){if(e(this).children().length<1){var n=e('<input type="text" value="'+e(this).html()+'"/>');o._bootstrapThemeAddClass(n,"form-control"),n.css("background-repeat","no-repeat"),n.css("background-position","right center"),n.addClass(a.inputClass),a.addMask&&n.mask(a.addMask),e(this).html(n),a.required&&e(this).parent().append("<b><i>"+o.options.messages.required+"</i></b>"),n.bind("change blur focusout",function(){if(""==e(this).val().trim()&&a.required)e(this).attr("title",o.options.messages.required);else{e(this).css("background-image",'url("'+o.options.editinline.img+'loading.gif")');var n={};n[i]=e(this).val().trim(),n[o._keyField]=t[o._keyField],o._editInline_ajax(n)&&(r.children().html(e(this).val().trim()+"&nbsp;&nbsp;&nbsp;&nbsp;"),"http://"==e(this).val().trim().substring(7)||"https://"==e(this).val().trim().substring(8)?r.children().attr("href",e(this).val().trim()):r.children().attr("href","http://"+e(this).val().trim()),t[i]=e(this).val().trim(),e(this).css("background","none"),o._showUpdateAnimationForRow(r.closest("tr")))}}),n.focus()}return!1}),r},_editInline_ajax:function(e){var t=this,i=!0;return this._ajax({url:t.options.actions.updateAction,data:e,success:function(e){return"OK"!=e.Result?i=!1:void t._trigger("recordUpdated",null,{})},error:function(){error(t.options.messages.serverCommunicationError)}}),i}})}(jQuery),function(e){var t={_create:e.hik.jtable.prototype._create,_addColumnsToHeaderRow:e.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:e.hik.jtable.prototype._addCellsToRowUsingRecord};e.extend(!0,e.hik.jtable.prototype,{options:{deleteConfirmation:!0,recordDeleted:function(){},messages:{deleteConfirmation:"This record will be deleted. Are you sure?",deleteText:"Delete",deleting:"Deleting",canNotDeletedRecords:"Can not delete {0} of {1} records!",deleteProggress:"Deleting {0} of {1} records, processing..."}},_$deleteRecordDiv:null,_$deletingRow:null,_create:function(){t._create.apply(this,arguments),this._createDeleteDialogDiv()},_createDeleteDialogDiv:function(){var t=this;t.options.actions.deleteAction&&(t._$deleteRecordDiv=e('<div><p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span><span class="jtable-delete-confirm-message"></span></p></div>').appendTo(t._$mainContainer),t._$deleteRecordDiv.dialog({appendTo:t._$mainContainer,autoOpen:!1,show:t.options.dialogShowEffect,hide:t.options.dialogHideEffect,modal:!0,title:t.options.messages.areYouSure,buttons:[{text:t.options.messages.cancel,click:function(){t._$deleteRecordDiv.dialog("close")}},{id:"DeleteDialogButton",text:t.options.messages.deleteText,click:function(){if(t._$deletingRow.hasClass("jtable-row-removed"))return void t._$deleteRecordDiv.dialog("close");var e=t._$deleteRecordDiv.parent().find("#DeleteDialogButton");t._setEnabledOfDialogButton(e,!1,t.options.messages.deleting),t._deleteRecordFromServer(t._$deletingRow,function(){t._removeRowsFromTableWithAnimation(t._$deletingRow),t._$deleteRecordDiv.dialog("close")},function(i){t._showError(i),t._setEnabledOfDialogButton(e,!0,t.options.messages.deleteText)})}}],close:function(){var e=t._$deleteRecordDiv.parent().find("#DeleteDialogButton");t._setEnabledOfDialogButton(e,!0,t.options.messages.deleteText)}}))},deleteRows:function(t){var i=this;if(t.length<=0)return void i._logWarn("No rows specified to jTable deleteRows method.");if(i._isBusy())return void i._logWarn("Can not delete rows since jTable is busy!");if(1==t.length)return void i._deleteRecordFromServer(t,function(){i._removeRowsFromTableWithAnimation(t)},function(e){i._showError(e)});i._showBusy(i._formatString(i.options.messages.deleteProggress,0,t.length));var o=0,a=function(){return o>=t.length},n=function(){var e=t.filter(".jtable-row-ready-to-remove");e.length<t.length&&i._showError(i._formatString(i.options.messages.canNotDeletedRecords,t.length-e.length,t.length)),e.length>0&&i._removeRowsFromTableWithAnimation(e),i._hideBusy()},s=0;t.each(function(){var r=e(this);i._deleteRecordFromServer(r,function(){++s,++o,r.addClass("jtable-row-ready-to-remove"),i._showBusy(i._formatString(i.options.messages.deleteProggress,s,t.length)),a()&&n()},function(){++o,a()&&n()})})},deleteRecord:function(t){var i=this;if(t=e.extend({clientOnly:!1,animationsEnabled:i.options.animationsEnabled,url:i.options.actions.deleteAction,success:function(){},error:function(){}},t),void 0==t.key)return void i._logWarn("options parameter in deleteRecord method must contain a key property.");var o=i.getRowByKey(t.key);return null==o?void i._logWarn("Can not found any row by key: "+t.key):t.clientOnly?(i._removeRowsFromTableWithAnimation(o,t.animationsEnabled),void t.success()):void i._deleteRecordFromServer(o,function(e){i._removeRowsFromTableWithAnimation(o,t.animationsEnabled),t.success(e)},function(e){i._showError(e),t.error(e)},t.url)},_addColumnsToHeaderRow:function(e){t._addColumnsToHeaderRow.apply(this,arguments),void 0!=this.options.actions.deleteAction&&e.append(this._createEmptyCommandHeader())},_addCellsToRowUsingRecord:function(i){t._addCellsToRowUsingRecord.apply(this,arguments);var o=this;if(void 0!=o.options.actions.deleteAction){var a=e("<span></span>").html(o.options.messages.deleteText),n=e('<button title="'+o.options.messages.deleteText+'"></button>').addClass("jtable-command-button jtable-delete-command-button").append(a).click(function(e){e.preventDefault(),e.stopPropagation(),o._deleteButtonClickedForRow(i)});e("<td></td>").addClass("jtable-command-column").append(n).appendTo(i)}},_deleteButtonClickedForRow:function(t){var i,o=this,a=o.options.messages.deleteConfirmation;if(e.isFunction(o.options.deleteConfirmation)){var n={row:t,record:t.data("record"),deleteConfirm:!0,deleteConfirmMessage:a,cancel:!1,cancelMessage:null};if(o.options.deleteConfirmation(n),n.cancel)return void(n.cancelMessage&&o._showError(n.cancelMessage));a=n.deleteConfirmMessage,i=n.deleteConfirm}else i=o.options.deleteConfirmation;0!=i?(o._$deleteRecordDiv.find(".jtable-delete-confirm-message").html(a),o._showDeleteDialog(t)):o._deleteRecordFromServer(t,function(){o._removeRowsFromTableWithAnimation(t)},function(e){o._showError(e)})},_showDeleteDialog:function(e){this._$deletingRow=e,this._$deleteRecordDiv.dialog("open")},_deleteRecordFromServer:function(t,i,o,a){var n=this,s=function(e){return"OK"!=e.Result?(t.data("deleting",!1),void(o&&o(e.Message))):(n._trigger("recordDeleted",null,{record:t.data("record"),row:t,serverResponse:e}),void(i&&i(e)))};if(1!=t.data("deleting")){t.data("deleting",!0);var r={};if(r[n._keyField]=n._getKeyValueOfRecord(t.data("record")),!a&&e.isFunction(n.options.actions.deleteAction)){var l=n.options.actions.deleteAction(r);n._isDeferredObject(l)?l.done(function(e){s(e)}).fail(function(){t.data("deleting",!1),o&&o(n.options.messages.serverCommunicationError)}):s(l)}else this._ajax({url:a||n.options.actions.deleteAction,data:r,success:function(e){s(e)},error:function(){t.data("deleting",!1),o&&o(n.options.messages.serverCommunicationError)
}})}},_removeRowsFromTableWithAnimation:function(e,t){var i=this;if(void 0==t&&(t=i.options.animationsEnabled),t){var o="jtable-row-deleting";this.options.jqueryuiTheme&&(o+=" ui-state-disabled"),e.stop(!0,!0).addClass(o,"slow","").promise().done(function(){i._removeRowsFromTable(e,"deleted")})}else i._removeRowsFromTable(e,"deleted")}})}(jQuery),function(e){var t={_addRowToTableHead:e.hik.jtable.prototype._addRowToTableHead};e.extend(!0,e.hik.jtable.prototype,{options:{toolbarsearch:{enable:!1,dateFR:!1}},_addRowToTableHead:function(i){if(t._addRowToTableHead.apply(this,arguments),this.options.toolbarsearch.enable){var o=e("<tr></tr>").appendTo(i);this._toolbarsearch_addColumnsToHeaderRow(o)}},_toolbarsearch_addColumnsToHeaderRow:function(t){for(var i=this,o=0;o<this._columnList.length;o++){var a=this._columnList[o],n=this._toolbarsearch_createHeaderCellForField(a,this.options.fields[a]);n.appendTo(t)}var s=e("<th></th>").addClass("jtable-toolbarsearch-reset").attr("colspan",e(".jtable-command-column-header").length),r=e("<button>refresh</button>").button({icons:{primary:"ui-icon-refresh"}}).appendTo(s);r.click(function(){e(".jtable-toolbarsearch").val(""),i.load({})}),t.append(s)},_toolbarsearch_createHeaderCellForField:function(t,i){var o=this;"undefined"==typeof i.searchable&&(i.searchable=!0),i.width=i.width||"10%";var a=this._getColumnDisplay(t,i);o._bootstrapThemeAddClass(a,"form-control"),a.bind("change",function(){var t=[],i=[],a=0;e(".jtable-toolbarsearch").each(function(){var n=e(this).attr("id");null!=e(this).val()&&e(this).val().length>=1&&(e(this).is(".datefr")?(i.push(n.replace("jtable-toolbarsearch-","")),t.push(1==o.options.toolbarsearch.dateFR?o._jourFRtoEN(e(this).val()):e(this).val()),a++):e(this).is(".deroulant")?"0"!=e(this).val()&&(i.push(n.replace("jtable-toolbarsearch-","")),t.push(e(this).val()),a++):(i.push(n.replace("jtable-toolbarsearch-","")),t.push(e(this).val()),a++))}),o.load({"query[]":t,"fieldNameOpt[]":i})});var n=e("<div />").addClass("jtable-column-header-container");i.searchable&&n.append(a);var s=e("<th></th>").addClass("jtable-column-header").css("width",i.width).css("vertical-align","top").data("fieldName",t).append(n);return"hidden"==i.visibility&&s.css("display","none"),s},_getColumnDisplay:function(e,t){return"date"==t.type?this._getDisplayDate(e,t):"checkbox"==t.type?this._getDisplayCheckBox(e,t):t.options?this._getDisplayComboBox(e,t):this._getDisplayText(e,t)},_getDisplayDate:function(t,i){var o=i.displayFormat||this.options.defaultDateFormat,a=e('<input id="jtable-toolbarsearch-'+t+'" type="text"/>').addClass("jtable-toolbarsearch").addClass("datefr").css("width","100%").datepicker({dateFormat:o});return a},_getDisplayText:function(t){var i=e('<input id="jtable-toolbarsearch-'+t+'" type="text"/>').addClass("jtable-toolbarsearch").css("width","100%");return i},_getDisplayCheckBox:function(t){var i=e('<select id="jtable-toolbarsearch-'+t+'"><option value="-1"> - - - </option><option value="0">NON</option><option value="1">OUI</option></select>').addClass("jtable-toolbarsearch").addClass("form-control").addClass("deroulant").css("width","100%");return i},_getDisplayComboBox:function(t){var i=e('<select id="jtable-toolbarsearch-'+t+'"></select>').addClass("jtable-toolbarsearch").addClass("form-control").addClass("deroulant").css("width","100%"),o=this._getOptionsForField(t,{record:"",source:"create",form:"",dependedValues:this._createDependedValuesUsingForm("","")});return this._fillDropDownListWithOptions(i,o,""),i},_jourFRtoEN:function(e){if(""==e||null==e||void 0==e)return"";var t=e.substr(6,4),i=e.substr(3,2);return e=e.substr(0,2),t+"-"+i+"-"+e}})}(jQuery),function(e){var t={_create:e.hik.jtable.prototype._create,_normalizeFieldOptions:e.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:e.hik.jtable.prototype._createHeaderCellForField,_createCellForRecordField:e.hik.jtable.prototype._createCellForRecordField};e.extend(!0,e.hik.jtable.prototype,{options:{tableId:void 0,columnResizable:!0,columnSelectable:!0},_$columnSelectionDiv:null,_$columnResizeBar:null,_cookieKeyPrefix:null,_currentResizeArgs:null,_create:function(){t._create.apply(this,arguments),this._createColumnResizeBar(),this._createColumnSelection(),this.options.saveUserPreferences&&this._loadColumnSettings(),this._normalizeColumnWidths()},_normalizeFieldOptions:function(e,i){t._normalizeFieldOptions.apply(this,arguments),this.options.columnResizable&&(i.columnResizable=0!=i.columnResizable),i.visibility||(i.visibility="visible")},_createHeaderCellForField:function(e,i){var o=t._createHeaderCellForField.apply(this,arguments);return this.options.columnResizable&&i.columnResizable&&e!=this._columnList[this._columnList.length-1]&&this._makeColumnResizable(o),"hidden"==i.visibility&&o.hide(),o},_createCellForRecordField:function(e,i){var o=t._createCellForRecordField.apply(this,arguments),a=this.options.fields[i];return"hidden"==a.visibility&&o.hide(),o},changeColumnVisibility:function(e,t){this._changeColumnVisibilityInternal(e,t),this._normalizeColumnWidths(),this.options.saveUserPreferences&&this._saveColumnSettings()},_changeColumnVisibilityInternal:function(e,t){var i=this._columnList.indexOf(e);if(0>i)return void this._logWarn('Column "'+e+'" does not exist in fields!');if(["visible","hidden","fixed"].indexOf(t)<0)return void this._logWarn('Visibility value is not valid: "'+t+'"! Options are: visible, hidden, fixed.');var o=this.options.fields[e];if(o.visibility!=t){var a=this._firstDataColumnOffset+i+1;"hidden"!=o.visibility&&"hidden"==t?this._$table.find(">thead >tr >th:nth-child("+a+"),>tbody >tr >td:nth-child("+a+")").hide():"hidden"==o.visibility&&"hidden"!=t&&this._$table.find(">thead >tr >th:nth-child("+a+"),>tbody >tr >td:nth-child("+a+")").show().css("display","table-cell"),o.visibility=t}},_createColumnSelection:function(){var t=this;this._$columnSelectionDiv=e("<div />").addClass("jtable-column-selection-container").appendTo(t._$mainContainer),this._$table.children("thead").bind("contextmenu",function(i){if(t.options.columnSelectable){i.preventDefault(),e("<div />").addClass("jtable-contextmenu-overlay").click(function(){e(this).remove(),t._$columnSelectionDiv.hide()}).bind("contextmenu",function(){return!1}).appendTo(document.body),t._fillColumnSelection();var o=t._$mainContainer.offset(),a=i.pageY-o.top,n=i.pageX-o.left,s=100,r=t._$mainContainer.width();r>s&&n>r-s&&(n=r-s),t._$columnSelectionDiv.css({left:n,top:a,"min-width":s+"px"}).show()}})},_fillColumnSelection:function(){for(var t=this,i=e("<ul></ul>").addClass("jtable-column-select-list"),o=0;o<this._columnList.length;o++){var a=this._columnList[o],n=this.options.fields[a],s=e("<li></li>").appendTo(i),r=e('<label for="'+a+'"></label>').append(e("<span>"+(n.title||a)+"</span>")).appendTo(s),l=e('<input type="checkbox" name="'+a+'">').prependTo(r).click(function(){var i=e(this),o=i.attr("name"),a=t.options.fields[o];"fixed"!=a.visibility&&t.changeColumnVisibility(o,i.is(":checked")?"visible":"hidden")});"hidden"!=n.visibility&&l.attr("checked","checked"),"fixed"==n.visibility&&l.attr("disabled","disabled")}this._$columnSelectionDiv.html(i)},_createColumnResizeBar:function(){this._$columnResizeBar=e("<div />").addClass("jtable-column-resize-bar").appendTo(this._$mainContainer).hide()},_makeColumnResizable:function(t){var i=this;e("<div />").addClass("jtable-column-resize-handler").appendTo(t.find(".jtable-column-header-container")).mousedown(function(o){o.preventDefault(),o.stopPropagation();var a=i._$mainContainer.offset(),n=t.nextAll("th.jtable-column-header:visible:first");if(n.length){var s=10;i._currentResizeArgs={currentColumnStartWidth:t.outerWidth(),minWidth:s,maxWidth:t.outerWidth()+n.outerWidth()-s,mouseStartX:o.pageX,minResizeX:function(){return this.mouseStartX-(this.currentColumnStartWidth-this.minWidth)},maxResizeX:function(){return this.mouseStartX+(this.maxWidth-this.currentColumnStartWidth)}};var r=function(e){if(i._currentResizeArgs){var t=i._normalizeNumber(e.pageX,i._currentResizeArgs.minResizeX(),i._currentResizeArgs.maxResizeX());i._$columnResizeBar.css("left",t-a.left+"px")}},l=function(o){if(i._currentResizeArgs){e(document).unbind("mousemove",r),e(document).unbind("mouseup",l),i._$columnResizeBar.hide();var a=o.pageX-i._currentResizeArgs.mouseStartX,s=i._normalizeNumber(i._currentResizeArgs.currentColumnStartWidth+a,i._currentResizeArgs.minWidth,i._currentResizeArgs.maxWidth),d=n.outerWidth()+(i._currentResizeArgs.currentColumnStartWidth-s),c=t.data("width-in-percent")/i._currentResizeArgs.currentColumnStartWidth;t.data("width-in-percent",s*c),n.data("width-in-percent",d*c),t.css("width",t.data("width-in-percent")+"%"),n.css("width",n.data("width-in-percent")+"%"),i._normalizeColumnWidths(),i._currentResizeArgs=null,i.options.saveUserPreferences&&i._saveColumnSettings()}};i._$columnResizeBar.show().css({top:t.offset().top-a.top+"px",left:o.pageX-a.left+"px",height:i._$table.outerHeight()+"px"}),e(document).bind("mousemove",r),e(document).bind("mouseup",l)}})},_normalizeColumnWidths:function(){var t=this._$table.find(">thead th.jtable-command-column-header").data("width-in-percent",1).css("width","1%"),i=this._$table.find(">thead th.jtable-column-header"),o=0;i.each(function(){var t=e(this);t.is(":visible")&&(o+=t.outerWidth())});var a={},n=100-t.length;i.each(function(){var t=e(this);if(t.is(":visible")){var i=t.data("fieldName"),s=t.outerWidth()*n/o;a[i]=s}}),i.each(function(){var t=e(this);if(t.is(":visible")){var i=t.data("fieldName");t.data("width-in-percent",a[i]).css("width",a[i]+"%")}})},_saveColumnSettings:function(){var t=this,i="";this._$table.find(">thead >tr >th.jtable-column-header").each(function(){var o=e(this),a=o.data("fieldName"),n=o.data("width-in-percent"),s=t.options.fields[a].visibility,r=a+"="+s+";"+n;i=i+r+"|"}),this._setCookie("column-settings",i.substr(0,i.length-1))},_loadColumnSettings:function(){var t=this,i=this._getCookie("column-settings");if(i){var o={};e.each(i.split("|"),function(e,t){var i=t.split("="),a=i[0],n=i[1].split(";");o[a]={columnVisibility:n[0],columnWidth:n[1]}});var a=this._$table.find(">thead >tr >th.jtable-column-header");a.each(function(){var i=e(this),a=i.data("fieldName"),n=t.options.fields[a];o[a]&&("fixed"!=n.visibility&&t._changeColumnVisibilityInternal(a,o[a].columnVisibility),i.data("width-in-percent",o[a].columnWidth).css("width",o[a].columnWidth+"%"))})}}})}(jQuery),!function(e){"use strict";var t=function(t,i){this.options=i,this.$element=e(t),this.$container=e("<div/>",{"class":"ms-container"}),this.$selectableContainer=e("<div/>",{"class":"ms-selectable"}),this.$selectionContainer=e("<div/>",{"class":"ms-selection"}),this.$selectableUl=e("<ul/>",{"class":"ms-list",tabindex:"-1"}),this.$selectionUl=e("<ul/>",{"class":"ms-list",tabindex:"-1"}),this.scrollTo=0,this.elemsSelector="li:visible:not(.ms-optgroup-label,.ms-optgroup-container,."+i.disabledClass+")"};t.prototype={constructor:t,init:function(){var t=this,i=this.$element;if(0===i.next(".ms-container").length){i.css({position:"absolute",left:"-9999px"}),i.attr("id",i.attr("id")?i.attr("id"):Math.ceil(1e3*Math.random())+"multiselect"),this.$container.attr("id","ms-"+i.attr("id")),this.$container.addClass(t.options.cssClass),i.find("option").each(function(){t.generateLisFromOption(this)}),this.$selectionUl.find(".ms-optgroup-label").hide(),t.options.selectableHeader&&t.$selectableContainer.append(t.options.selectableHeader),t.$selectableContainer.append(t.$selectableUl),t.options.selectableFooter&&t.$selectableContainer.append(t.options.selectableFooter),t.options.selectionHeader&&t.$selectionContainer.append(t.options.selectionHeader),t.$selectionContainer.append(t.$selectionUl),t.options.selectionFooter&&t.$selectionContainer.append(t.options.selectionFooter),t.$container.append(t.$selectableContainer),t.$container.append(t.$selectionContainer),i.after(t.$container),t.activeMouse(t.$selectableUl),t.activeKeyboard(t.$selectableUl);var o=t.options.dblClick?"dblclick":"click";t.$selectableUl.on(o,".ms-elem-selectable",function(){t.select(e(this).data("ms-value"))}),t.$selectionUl.on(o,".ms-elem-selection",function(){t.deselect(e(this).data("ms-value"))}),t.activeMouse(t.$selectionUl),t.activeKeyboard(t.$selectionUl),i.on("focus",function(){t.$selectableUl.focus()})}var a=i.find("option:selected").map(function(){return e(this).val()}).get();t.select(a,"init"),"function"==typeof t.options.afterInit&&t.options.afterInit.call(this,this.$container)},generateLisFromOption:function(t,i){for(var o=this,a=o.$element,n="",s=e(t),r=0;r<t.attributes.length;r++){var l=t.attributes[r];"value"!==l.name&&"disabled"!==l.name&&(n+=l.name+'="'+l.value+'" ')}var d=e("<li "+n+"><span>"+o.escapeHTML(s.text())+"</span></li>"),c=d.clone(),u=s.val(),p=o.sanitize(u);d.data("ms-value",u).addClass("ms-elem-selectable").attr("id",p+"-selectable"),c.data("ms-value",u).addClass("ms-elem-selection").attr("id",p+"-selection").hide(),(s.prop("disabled")||a.prop("disabled"))&&(c.addClass(o.options.disabledClass),d.addClass(o.options.disabledClass));var h=s.parent("optgroup");if(h.length>0){var f=h.attr("label"),m=o.sanitize(f),g=o.$selectableUl.find("#optgroup-selectable-"+m),v=o.$selectionUl.find("#optgroup-selection-"+m);if(0===g.length){var _='<li class="ms-optgroup-container"></li>',b='<ul class="ms-optgroup"><li class="ms-optgroup-label"><span>'+f+"</span></li></ul>";g=e(_),v=e(_),g.attr("id","optgroup-selectable-"+m),v.attr("id","optgroup-selection-"+m),g.append(e(b)),v.append(e(b)),o.options.selectableOptgroup&&(g.find(".ms-optgroup-label").on("click",function(){var t=h.children(":not(:selected, :disabled)").map(function(){return e(this).val()}).get();o.select(t)}),v.find(".ms-optgroup-label").on("click",function(){var t=h.children(":selected:not(:disabled)").map(function(){return e(this).val()}).get();o.deselect(t)})),o.$selectableUl.append(g),o.$selectionUl.append(v)}i=void 0==i?g.find("ul").children().length:i+1,d.insertAt(i,g.children()),c.insertAt(i,v.children())}else i=void 0==i?o.$selectableUl.children().length:i,d.insertAt(i,o.$selectableUl),c.insertAt(i,o.$selectionUl)},addOption:function(t){var i=this;void 0!==t.value&&null!==t.value&&(t=[t]),e.each(t,function(t,o){if(void 0!==o.value&&null!==o.value&&0===i.$element.find("option[value='"+o.value+"']").length){var a=e('<option value="'+o.value+'">'+o.text+"</option>"),t=parseInt("undefined"==typeof o.index?i.$element.children().length:o.index),n=void 0==o.nested?i.$element:e("optgroup[label='"+o.nested+"']");a.insertAt(t,n),i.generateLisFromOption(a.get(0),t,o.nested)}})},escapeHTML:function(t){return e("<div>").text(t).html()},activeKeyboard:function(t){var i=this;t.on("focus",function(){e(this).addClass("ms-focus")}).on("blur",function(){e(this).removeClass("ms-focus")}).on("keydown",function(o){switch(o.which){case 40:case 38:return o.preventDefault(),o.stopPropagation(),void i.moveHighlight(e(this),38===o.which?-1:1);case 37:case 39:return o.preventDefault(),o.stopPropagation(),void i.switchList(t);case 9:if(i.$element.is("[tabindex]")){o.preventDefault();var a=parseInt(i.$element.attr("tabindex"),10);return a=o.shiftKey?a-1:a+1,void e('[tabindex="'+a+'"]').focus()}o.shiftKey&&i.$element.trigger("focus")}return e.inArray(o.which,i.options.keySelect)>-1?(o.preventDefault(),o.stopPropagation(),void i.selectHighlighted(t)):void 0})},moveHighlight:function(e,t){{var i=e.find(this.elemsSelector),o=i.filter(".ms-hover"),a=null,n=i.first().outerHeight(),s=e.height();"#"+this.$container.prop("id")}if(i.removeClass("ms-hover"),1===t){if(a=o.nextAll(this.elemsSelector).first(),0===a.length){var r=o.parent();if(r.hasClass("ms-optgroup")){var l=r.parent(),d=l.next(":visible");a=d.length>0?d.find(this.elemsSelector).first():i.first()}else a=i.first()}}else if(-1===t&&(a=o.prevAll(this.elemsSelector).first(),0===a.length)){var r=o.parent();if(r.hasClass("ms-optgroup")){var l=r.parent(),c=l.prev(":visible");a=c.length>0?c.find(this.elemsSelector).last():i.last()}else a=i.last()}if(a.length>0){a.addClass("ms-hover");var u=e.scrollTop()+a.position().top-s/2+n/2;e.scrollTop(u)}},selectHighlighted:function(e){var t=e.find(this.elemsSelector),i=t.filter(".ms-hover").first();i.length>0&&(e.parent().hasClass("ms-selectable")?this.select(i.data("ms-value")):this.deselect(i.data("ms-value")),t.removeClass("ms-hover"))},switchList:function(e){e.blur(),this.$container.find(this.elemsSelector).removeClass("ms-hover"),e.parent().hasClass("ms-selectable")?this.$selectionUl.focus():this.$selectableUl.focus()},activeMouse:function(){var t=this;e("body").on("mouseenter",t.elemsSelector,function(){e(this).parents(".ms-container").find(t.elemsSelector).removeClass("ms-hover"),e(this).addClass("ms-hover")}),e("body").on("mouseleave",t.elemsSelector,function(){e(this).parents(".ms-container").find(t.elemsSelector).removeClass("ms-hover")})},refresh:function(){this.destroy(),this.$element.multiSelect(this.options)},destroy:function(){e("#ms-"+this.$element.attr("id")).remove(),this.$element.css("position","").css("left",""),this.$element.removeData("multiselect")},select:function(t,i){"string"==typeof t&&(t=[t]);var o=this,a=this.$element,n=e.map(t,function(e){return o.sanitize(e)}),s=this.$selectableUl.find("#"+n.join("-selectable, #")+"-selectable").filter(":not(."+o.options.disabledClass+")"),r=this.$selectionUl.find("#"+n.join("-selection, #")+"-selection").filter(":not(."+o.options.disabledClass+")"),l=a.find("option:not(:disabled)").filter(function(){return e.inArray(this.value,t)>-1});if("init"===i&&(s=this.$selectableUl.find("#"+n.join("-selectable, #")+"-selectable"),r=this.$selectionUl.find("#"+n.join("-selection, #")+"-selection")),s.length>0){s.addClass("ms-selected").hide(),r.addClass("ms-selected").show(),l.prop("selected",!0),o.$container.find(o.elemsSelector).removeClass("ms-hover");var d=o.$selectableUl.children(".ms-optgroup-container");if(d.length>0){d.each(function(){var t=e(this).find(".ms-elem-selectable");t.length===t.filter(".ms-selected").length&&e(this).find(".ms-optgroup-label").hide()});var c=o.$selectionUl.children(".ms-optgroup-container");c.each(function(){var t=e(this).find(".ms-elem-selection");t.filter(".ms-selected").length>0&&e(this).find(".ms-optgroup-label").show()})}else if(o.options.keepOrder&&"init"!==i){var u=o.$selectionUl.find(".ms-selected");u.length>1&&u.last().get(0)!=r.get(0)&&r.insertAfter(u.last())}"init"!==i&&(a.trigger("change"),"function"==typeof o.options.afterSelect&&o.options.afterSelect.call(this,t))}},deselect:function(t){"string"==typeof t&&(t=[t]);var i=this,o=this.$element,a=e.map(t,function(e){return i.sanitize(e)}),n=this.$selectableUl.find("#"+a.join("-selectable, #")+"-selectable"),s=this.$selectionUl.find("#"+a.join("-selection, #")+"-selection").filter(".ms-selected").filter(":not(."+i.options.disabledClass+")"),r=o.find("option").filter(function(){return e.inArray(this.value,t)>-1});if(s.length>0){n.removeClass("ms-selected").show(),s.removeClass("ms-selected").hide(),r.prop("selected",!1),i.$container.find(i.elemsSelector).removeClass("ms-hover");var l=i.$selectableUl.children(".ms-optgroup-container");if(l.length>0){l.each(function(){var t=e(this).find(".ms-elem-selectable");t.filter(":not(.ms-selected)").length>0&&e(this).find(".ms-optgroup-label").show()});var d=i.$selectionUl.children(".ms-optgroup-container");d.each(function(){var t=e(this).find(".ms-elem-selection");0===t.filter(".ms-selected").length&&e(this).find(".ms-optgroup-label").hide()})}o.trigger("change"),"function"==typeof i.options.afterDeselect&&i.options.afterDeselect.call(this,t)}},select_all:function(){var t=this.$element,i=t.val();if(t.find('option:not(":disabled")').prop("selected",!0),this.$selectableUl.find(".ms-elem-selectable").filter(":not(."+this.options.disabledClass+")").addClass("ms-selected").hide(),this.$selectionUl.find(".ms-optgroup-label").show(),this.$selectableUl.find(".ms-optgroup-label").hide(),this.$selectionUl.find(".ms-elem-selection").filter(":not(."+this.options.disabledClass+")").addClass("ms-selected").show(),this.$selectionUl.focus(),t.trigger("change"),"function"==typeof this.options.afterSelect){var o=e.grep(t.val(),function(t){return e.inArray(t,i)<0});this.options.afterSelect.call(this,o)}},deselect_all:function(){var e=this.$element,t=e.val();e.find("option").prop("selected",!1),this.$selectableUl.find(".ms-elem-selectable").removeClass("ms-selected").show(),this.$selectionUl.find(".ms-optgroup-label").hide(),this.$selectableUl.find(".ms-optgroup-label").show(),this.$selectionUl.find(".ms-elem-selection").removeClass("ms-selected").hide(),this.$selectableUl.focus(),e.trigger("change"),"function"==typeof this.options.afterDeselect&&this.options.afterDeselect.call(this,t)},sanitize:function(e){var t,i,o=0;if(0==e.length)return o;var a=0;for(t=0,a=e.length;a>t;t++)i=e.charCodeAt(t),o=(o<<5)-o+i,o|=0;return o}},e.fn.multiSelect=function(){var i=arguments[0],o=arguments;return this.each(function(){var a=e(this),n=a.data("multiselect"),s=e.extend({},e.fn.multiSelect.defaults,a.data(),"object"==typeof i&&i);n||a.data("multiselect",n=new t(this,s)),"string"==typeof i?n[i](o[1]):n.init()})},e.fn.multiSelect.defaults={keySelect:[32],selectableOptgroup:!1,disabledClass:"disabled",dblClick:!1,keepOrder:!1,cssClass:""},e.fn.multiSelect.Constructor=t,e.fn.insertAt=function(e,t){return this.each(function(){0===e?t.prepend(this):t.children().eq(e-1).after(this)})}}(window.jQuery),function(e){e.extend(!0,e.hik.jtable.prototype,{options:{messages:{addFile:"Choose file",delFile:"Delete file",warningFile:"Warning, the file is auto upload even if you don't save!<br> And if you change the upload file, the older file is deleted"}},_submitFormUsingAjax:function(e,t,i,o){this._ajax({url:e,data:t,success:i,error:o})},_createInputLabelForRecordField:function(t){return e("<div />").addClass("jtable-input-label").html(this.options.fields[t].inputTitle||this.options.fields[t].title)},_createInputForRecordField:function(t){var i=t.fieldName,o=t.value,a=t.record,n=t.formType,s=t.form,r=this.options.fields[i];if((void 0==o||null==o)&&(o=r.defaultValue),r.input){var l=e(r.input({value:o,record:a,formType:n,form:s}));return l.attr("id")||l.attr("id","Edit-"+i),e("<div />").addClass("jtable-input jtable-custom-input").append(l)}return"date"==r.type?this._createDateInputForField(r,i,o):"textarea"==r.type?this._createTextAreaForField(r,i,o):"password"==r.type?this._createPasswordInputForField(r,i,o):"checkbox"==r.type?this._createCheckboxForField(r,i,o):r.upload?this._createUploadForField(r,i,o):r.options?"radiobutton"==r.type?this._createRadioButtonListForField(r,i,o,a,n):"multiselect"==r.type?this._createDropDownListMultiForField(r,i,o,a,n,s):this._createDropDownListForField(r,i,o,a,n,s):"number"==r.type?this._createTextInputForField(r,i,o).attr("type","number").numeric(","):r.geocomplete?this._createGeoInputForField(r,i,o):this._createTextInputForField(r,i,o)},_createInputForHidden:function(t,i){return void 0==i&&(i=""),e('<input type="hidden" name="'+t+'" id="Edit-'+t+'"></input>').val(i)},_createDateInputForField:function(t,i,o){if(t.required)var a=e('<input class="'+t.inputClass+'  validate[required,custom[date]]" '+t.inputAttr+' style="'+t.inputCss+'" id="Edit-'+i+'" type="text" name="'+i+'"></input>');else var a=e('<input class="'+t.inputClass+' validate[custom[date]]" '+t.inputAttr+' style="'+t.inputCss+'" id="Edit-'+i+'" type="text" name="'+i+'"></input>');t.inputSize&&a.attr("size",t.inputSize),void 0!=o&&a.val(o);var n=t.displayFormat||this.options.defaultDateFormat;return a.datepicker({dateFormat:n,changeMonth:!0,changeYear:!0}),this._bootstrapThemeAddClass(a,"form-control"),e("<div />").addClass("jtable-input jtable-date-input").append(a)},_createTextAreaForField:function(t,i,o){var a=e("<textarea "+t.inputAttr+" >");return a.addClass(t.inputClass),a.attr("id","Edit-"+i),a.attr("name",i),t.required&&a.addClass("validate[required]"),t.inputSize&&a.attr("size",t.inputSize),void 0!=o&&a.val(o),this._bootstrapThemeAddClass(a,"form-control"),e("<div />").addClass("jtable-input jtable-textarea-input").append(a)},_createTextInputForField:function(t,i,o){var a=e('<input  type="text" '+t.inputAttr+' style="'+t.inputCss+'">');return a.addClass(t.inputClass),a.attr("id","Edit-"+i),a.attr("name",i),t.required&&a.addClass("validate[required]"),t.inputSize&&a.attr("size",t.inputSize),t.addMask&&a.mask(t.addMask),void 0!=o&&a.val(o),this._bootstrapThemeAddClass(a,"form-control"),e("<div />").addClass("jtable-input jtable-text-input").append(a)},_createPasswordInputForField:function(t,i,o){if(t.required)var a=e('<input class="'+t.inputClass+' validate[required]" id="Edit-'+i+'" type="password" name="'+i+'"></input>');else var a=e('<input class="'+t.inputClass+'" id="Edit-'+i+'" type="password" name="'+i+'"></input>');return t.inputSize&&a.attr("size",t.inputSize),void 0!=o&&a.val(o),this._bootstrapThemeAddClass(a,"form-control"),e("<div />").addClass("jtable-input jtable-password-input").append(a)},_createCheckboxForField:function(t,i,o){var a=this;void 0==o&&(o=a._getCheckBoxPropertiesForFieldByState(i,!1).Value);var n=e("<div />").addClass("jtable-input jtable-checkbox-input"),s=e('<input class="'+t.inputClass+'" id="Edit-'+i+'" type="checkbox" name="'+i+'" />').appendTo(n);void 0!=o&&s.val(o);var r=e("<span>"+(t.formText||a._getCheckBoxTextForFieldByValue(i,o))+"</span>").appendTo(n);a._getIsCheckBoxSelectedForFieldByValue(i,o)&&s.attr("checked","checked");var l=function(){var e=a._getCheckBoxPropertiesForFieldByState(i,s.is(":checked"));s.attr("value",e.Value),r.html(t.formText||e.DisplayText)};return s.click(function(){l()}),0!=t.setOnTextClick&&r.addClass("jtable-option-text-clickable").click(function(){s.is(":checked")?s.attr("checked",!1):s.attr("checked",!0),l()}),n},_createUploadForField:function(t,i,o){if(t.upload.maxFileSize)var a=t.upload.maxFileSize;else var a=1e8;if(t.upload.directory)var n=t.upload.directory;else var n="./";if(t.upload.typeDocument)var s=t.upload.typeDocument+"-";else var s="";if(!t.upload.url)return this._logError("Url for upload is not set!"),"";var r=e("<div>"),l=e("<form>");l.attr("target","iframeTarget"),l.attr("name","formUpload"),l.attr("class","formUploadFile"),l.attr("action",t.upload.url+"?action=upload"),l.attr("method","post"),l.attr("enctype","multipart/form-data");var d=e('<input type="file" name="FILE"/>').css("display","none"),c=e('<input type="button" id="btn_addFile" />');c.attr("value",this.options.messages.addFile).button();var u=e('<input type="button" id="btn_delFile"/>');u.attr("value",this.options.messages.delFile).button();var p=e('<input type="hidden"/>');p.attr("name",i).attr("id",i);var h=e('<input type="hidden"/>');h.attr("name","OLD_FILE");var f=e('<input type="text" readonly disabled="disabled">');void 0!=o&&(p.attr("value",o),h.attr("value",o),f.attr("value",o.slice(o.lastIndexOf("/")+1)));var m=e('<input type="hidden" name="MAX_FILE_SIZE"/>');m.attr("value",a);var g=e('<input type="hidden" name="DIRECTORY" value="'+n+'" />'),v=e('<input type="hidden" name="TYPEDOC" value="'+s+'" />');l.append(d),l.append(f),l.append(c),l.append(u),c.click(function(){l.append(m),l.append(g),l.append(v),d.click()});var _=e("<iframe>");return _.attr("class","upload-iframe"),_.attr("src","#"),_.attr("name","iframeTarget"),_.css("display","none"),r.append("<h4>"+this.options.messages.warningFile+"</h4>"),r.append(p),r.append(l),r.append(_),d.change(function(){""!=p.val()&&e.ajax({type:"POST",url:t.upload.url+"?action=delete",data:{filename:p.val()}}),p.val("/"+g.val()+v.val()+e(this).val().substring(12)),f.val(e(this).val().substring(12)),this.form.submit(),m.remove(),g.remove(),v.remove()}),u.click(function(){e.ajax({type:"POST",url:t.upload.url+"?action=delete",data:{filename:p.val()}}),p.val(""),f.val("")}),e("<div />").addClass("jtable-input jtable-text-input").append(r)},_createGeoInputForField:function(t,i,o){var a=e('<input  type="text">');return a.addClass(t.inputClass),a.attr("id","Edit-"+i),a.attr("name",i),t.required&&a.addClass("validate[required]"),t.inputSize&&a.attr("size",t.inputSize),t.addMask&&a.mask(t.addMask),void 0!=o&&a.val(o),this._bootstrapThemeAddClass(a,"form-control"),a.geocomplete(),e("<div />").addClass("jtable-input jtable-text-input").append(a)},_createDropDownListMultiForField:function(t,i,o,a,n,s){var r=e("<div />").addClass("jtable-input jtable-dropdown-input"),l=e('<select multiple class="'+t.inputClass+'" id="Edit-'+i+'" name="'+i+'[]"></select>').appendTo(r);this._bootstrapThemeAddClass(l,"form-control");var d=this._getOptionsForField(i,{record:a,source:n,form:s,dependedValues:this._createDependedValuesUsingForm(s,t.dependsOn)});return this._fillDropDownListWithOptions(l,d,o),l.multiSelect(),r},_createDropDownListForField:function(t,i,o,a,n,s){var r=e("<div />").addClass("jtable-input jtable-dropdown-input"),l=e('<select class="'+t.inputClass+'" id="Edit-'+i+'" name="'+i+'"></select>').appendTo(r);this._bootstrapThemeAddClass(l,"form-control");var d=this._getOptionsForField(i,{record:a,source:n,form:s,dependedValues:this._createDependedValuesUsingForm(s,t.dependsOn)});return this._fillDropDownListWithOptions(l,d,o),r},_fillDropDownListWithOptions:function(t,i,o){t.empty();for(var a=0;a<i.length;a++)e("<option"+(i[a].Value==o?' selected="selected"':"")+">"+i[a].DisplayText+"</option>").val(i[a].Value).appendTo(t)},_createDependedValuesUsingForm:function(e,t){if(!t)return{};for(var i={},o=0;o<t.length;o++){var a=t[o],n=e.find("select[name="+a+"]");n.length<=0||(i[a]=n.val())}return i},_createRadioButtonListForField:function(t,i,o,a,n){var s=e("<div />").addClass("jtable-input jtable-radiobuttonlist-input"),r=this._getOptionsForField(i,{record:a,source:n});return e.each(r,function(a,n){var r=e('<div class=""></div>').addClass("jtable-radio-input").appendTo(s),l=e('<input type="radio" id="Edit-'+i+"-"+a+'" class="'+t.inputClass+'" name="'+i+'"'+(n.Value==o+""?' checked="true"':"")+" />").val(n.Value).appendTo(r),d=e("<span></span>").html(n.DisplayText).appendTo(r);0!=t.setOnTextClick&&d.addClass("jtable-option-text-clickable").click(function(){l.is(":checked")||l.attr("checked",!0)})}),s},_getCheckBoxTextForFieldByValue:function(e,t){return this.options.fields[e].values[t]},_getIsCheckBoxSelectedForFieldByValue:function(e,t){return this._createCheckBoxStateArrayForFieldWithCaching(e)[1].Value.toString()==t.toString()},_getCheckBoxPropertiesForFieldByState:function(e,t){return this._createCheckBoxStateArrayForFieldWithCaching(e)[t?1:0]},_createCheckBoxStateArrayForFieldWithCaching:function(e){var t="checkbox_"+e;return this._cache[t]||(this._cache[t]=this._createCheckBoxStateArrayForField(e)),this._cache[t]},_createCheckBoxStateArrayForField:function(t){var i=[],o=0;return e.each(this.options.fields[t].values,function(e,t){o++<2&&i.push({Value:e,DisplayText:t})}),i},_makeCascadeDropDowns:function(t,i,o){var a=this;t.find("select").each(function(){var n=e(this),s=n.attr("name");if("[]"==s.substr(-2)&&(s=s.slice(0,-2)),s){var r=a.options.fields[s];r.dependsOn&&e.each(r.dependsOn,function(e,l){var d=t.find("select[name="+l+"]");d.change(function(){var e={record:i,source:o,form:t,dependedValues:{}};e.dependedValues=a._createDependedValuesUsingForm(t,r.dependsOn);var l=a._getOptionsForField(s,e);a._fillDropDownListWithOptions(n,l,void 0),n.change()})})}})},_updateRecordValuesFromForm:function(t,i){for(var o=0;o<this._fieldList.length;o++){var a=this._fieldList[o],n=this.options.fields[a];if(0!=n.edit){var s=i.find('[name="'+a+'"]');if(!(s.length<=0))if("date"==n.type){var r=s.val();if(r){var l=n.displayFormat||this.options.defaultDateFormat;try{var d=e.datepicker.parseDate(l,r);t[a]="/Date("+d.getTime()+")/"}catch(c){this._logWarn("Date format is incorrect for field "+a+": "+r),t[a]=""}}else this._logDebug("Date is empty for "+a),t[a]=""}else if(n.options&&"radiobutton"==n.type){var u=s.filter(":checked");t[a]=u.length?u.val():void 0}else t[a]=s.val()
}}},_setEnabledOfDialogButton:function(e,t,i){e&&(0!=t?e.removeAttr("disabled").removeClass("ui-state-disabled"):e.attr("disabled","disabled").addClass("ui-state-disabled"),i&&e.find("span").text(i))}})}(jQuery),function(e){var t={_removeRowsFromTable:e.hik.jtable.prototype._removeRowsFromTable};e.extend(!0,e.hik.jtable.prototype,{options:{openChildAsAccordion:!1},openChildTable:function(t,i,o){var a=this;void 0==i.jqueryuiTheme&&(i.jqueryuiTheme=a.options.jqueryuiTheme),i.showCloseButton=0!=i.showCloseButton,i.showCloseButton&&!i.closeRequested&&(i.closeRequested=function(){a.closeChildTable(t)}),a.options.openChildAsAccordion&&t.siblings(".jtable-data-row").each(function(){a.closeChildTable(e(this))}),a.closeChildTable(t,function(){var n=a.getChildRow(t).children("td").empty(),s=e("<div />").addClass("jtable-child-table-container").appendTo(n);n.data("childTable",s),s.jtable(i),a.openChildRow(t),s.hide().slideDown("fast",function(){o&&o({childTable:s})})})},closeChildTable:function(e,t){var i=this,o=this.getChildRow(e).children("td"),a=o.data("childTable");return a?(o.data("childTable",null),void a.slideUp("fast",function(){a.jtable("destroy"),a.remove(),i.closeChildRow(e),t&&t()})):void(t&&t())},isChildRowOpen:function(e){return this.getChildRow(e).is(":visible")},getChildRow:function(e){return e.data("childRow")||this._createChildRow(e)},openChildRow:function(e){var t=this.getChildRow(e);return t.is(":visible")||t.show(),t},closeChildRow:function(e){var t=this.getChildRow(e);t.is(":visible")&&t.hide()},_removeRowsFromTable:function(i,o){"deleted"==o&&i.each(function(){var t=e(this),i=t.data("childRow");i&&i.remove()}),t._removeRowsFromTable.apply(this,arguments)},_createChildRow:function(t){var i=this._$table.find("thead th").length,o=e("<tr></tr>").addClass("jtable-child-row").append('<td colspan="'+i+'"></td>');return t.after(o),t.data("childRow",o),o.hide(),o}})}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){e.fn.numeric=function(t,i){"boolean"==typeof t&&(t={decimal:t,negative:!0,decimalPlaces:-1}),t=t||{},"undefined"==typeof t.negative&&(t.negative=!0);var o=t.decimal===!1?"":t.decimal||".",a=t.negative===!0,n="undefined"==typeof t.decimalPlaces?-1:t.decimalPlaces;return i="function"==typeof i?i:function(){},this.data("numeric.decimal",o).data("numeric.negative",a).data("numeric.callback",i).data("numeric.decimalPlaces",n).keypress(e.fn.numeric.keypress).keyup(e.fn.numeric.keyup).blur(e.fn.numeric.blur)},e.fn.numeric.keypress=function(t){var i=e.data(this,"numeric.decimal"),o=e.data(this,"numeric.negative"),a=e.data(this,"numeric.decimalPlaces"),n=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(13==n&&"input"==this.nodeName.toLowerCase())return!0;if(13==n)return!1;if(35==n||36==n||37==n)return!1;var s=!1;if(t.ctrlKey&&97==n||t.ctrlKey&&65==n)return!0;if(t.ctrlKey&&120==n||t.ctrlKey&&88==n)return!0;if(t.ctrlKey&&99==n||t.ctrlKey&&67==n)return!0;if(t.ctrlKey&&122==n||t.ctrlKey&&90==n)return!0;if(t.ctrlKey&&118==n||t.ctrlKey&&86==n||t.shiftKey&&45==n)return!0;if(48>n||n>57){var r=e(this).val();if(0!==e.inArray("-",r.split(""))&&o&&45==n&&(0===r.length||0===parseInt(e.fn.getSelectionStart(this),10)))return!0;i&&n==i.charCodeAt(0)&&-1!=e.inArray(i,r.split(""))&&(s=!1),8!=n&&9!=n&&13!=n&&35!=n&&36!=n&&37!=n&&39!=n&&46!=n?s=!1:"undefined"!=typeof t.charCode&&(t.keyCode==t.which&&0!==t.which?(s=!0,46==t.which&&(s=!1)):0!==t.keyCode&&0===t.charCode&&0===t.which&&(s=!0)),i&&n==i.charCodeAt(0)&&(s=-1==e.inArray(i,r.split("")))}else if(s=!0,i&&a>0){var l=e.fn.getSelectionStart(this),d=e.fn.getSelectionEnd(this),c=e.inArray(i,e(this).val().split(""));l===d&&c>=0&&l>c&&e(this).val().length>c+a&&(s=!1)}return s},e.fn.numeric.keyup=function(){var t=e(this).val();if(t&&t.length>0){var i=e.fn.getSelectionStart(this),o=e.fn.getSelectionEnd(this),a=e.data(this,"numeric.decimal"),n=e.data(this,"numeric.negative"),s=e.data(this,"numeric.decimalPlaces");if(""!==a&&null!==a){var r=e.inArray(a,t.split(""));0===r&&(this.value="0"+t,i++,o++),1==r&&"-"==t.charAt(0)&&(this.value="-0"+t.substring(1),i++,o++),t=this.value}for(var l=[0,1,2,3,4,5,6,7,8,9,"-",a],d=t.length,c=d-1;c>=0;c--){var u=t.charAt(c);0!==c&&"-"==u?t=t.substring(0,c)+t.substring(c+1):0!==c||n||"-"!=u||(t=t.substring(1));for(var p=!1,h=0;h<l.length;h++)if(u==l[h]){p=!0;break}p&&" "!=u||(t=t.substring(0,c)+t.substring(c+1))}var f=e.inArray(a,t.split(""));if(f>0)for(var m=d-1;m>f;m--){var g=t.charAt(m);g==a&&(t=t.substring(0,m)+t.substring(m+1))}if(a&&s>0){var r=e.inArray(a,t.split(""));r>=0&&(t=t.substring(0,r+s+1),o=Math.min(t.length,o))}this.value=t,e.fn.setSelection(this,[i,o])}},e.fn.numeric.blur=function(){var t=e.data(this,"numeric.decimal"),i=e.data(this,"numeric.callback"),o=e.data(this,"numeric.negative"),a=this.value;if(""!==a){var n=new RegExp("^"+(o?"-?":"")+"\\d+$|^"+(o?"-?":"")+"\\d*"+t+"\\d+$");n.exec(a)||i.apply(this)}},e.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).data("numeric.decimalPlaces",null).unbind("keypress",e.fn.numeric.keypress).unbind("keyup",e.fn.numeric.keyup).unbind("blur",e.fn.numeric.blur)},e.fn.getSelectionStart=function(e){if("number"===e.type)return void 0;if(e.createTextRange&&document.selection){var t=document.selection.createRange().duplicate();return t.moveEnd("character",e.value.length),""==t.text?e.value.length:Math.max(0,e.value.lastIndexOf(t.text))}try{return e.selectionStart}catch(i){return 0}},e.fn.getSelectionEnd=function(e){if("number"===e.type)return void 0;if(e.createTextRange&&document.selection){var t=document.selection.createRange().duplicate();return t.moveStart("character",-e.value.length),t.text.length}return e.selectionEnd},e.fn.setSelection=function(e,t){if("number"==typeof t&&(t=[t,t]),t&&t.constructor==Array&&2==t.length)if("number"===e.type)e.focus();else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",t[0]),i.moveEnd("character",t[1]-t[0]),i.select()}else{e.focus();try{e.setSelectionRange&&e.setSelectionRange(t[0],t[1])}catch(o){}}}}),function(e){var t={load:e.hik.jtable.prototype.load,_create:e.hik.jtable.prototype._create,_setOption:e.hik.jtable.prototype._setOption,_createRecordLoadUrl:e.hik.jtable.prototype._createRecordLoadUrl,_createJtParamsForLoading:e.hik.jtable.prototype._createJtParamsForLoading,_addRowToTable:e.hik.jtable.prototype._addRowToTable,_addRow:e.hik.jtable.prototype._addRow,_removeRowsFromTable:e.hik.jtable.prototype._removeRowsFromTable,_onRecordsLoaded:e.hik.jtable.prototype._onRecordsLoaded};e.extend(!0,e.hik.jtable.prototype,{options:{paging:!1,pageList:"normal",pageSize:10,pageSizes:[10,25,50,100,250,500],pageSizeChangeArea:!0,gotoPageArea:"combobox",messages:{pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count",gotoPageLabel:"Go to page"}},_$bottomPanel:null,_$pagingListArea:null,_$pageSizeChangeArea:null,_$pageInfoSpan:null,_$gotoPageArea:null,_$gotoPageInput:null,_totalRecordCount:0,_currentPageNo:1,_create:function(){t._create.apply(this,arguments),this.options.paging&&(this._loadPagingSettings(),this._createBottomPanel(),this._createPageListArea(),this._createGotoPageInput(),this._createPageSizeSelection())},_loadPagingSettings:function(){if(this.options.saveUserPreferences){var e=this._getCookie("page-size");e&&(this.options.pageSize=this._normalizeNumber(e,1,1e6,this.options.pageSize))}},_createBottomPanel:function(){this._$bottomPanel=e("<div />").addClass("jtable-bottom-panel").insertAfter(this._$table),this._jqueryuiThemeAddClass(this._$bottomPanel,"ui-state-default"),e("<div />").addClass("jtable-left-area").appendTo(this._$bottomPanel),e("<div />").addClass("jtable-right-area").appendTo(this._$bottomPanel)},_createPageListArea:function(){this._$pagingListArea=e("<span></span>").addClass("jtable-page-list").appendTo(this._$bottomPanel.find(".jtable-left-area")),this._$pageInfoSpan=e("<span></span>").addClass("jtable-page-info").appendTo(this._$bottomPanel.find(".jtable-right-area"))},_createPageSizeSelection:function(){var t=this;if(t.options.pageSizeChangeArea){t._findIndexInArray(t.options.pageSize,t.options.pageSizes)<0&&(t.options.pageSizes.push(parseInt(t.options.pageSize)),t.options.pageSizes.sort(function(e,t){return e-t})),t._$pageSizeChangeArea=e("<span></span>").addClass("jtable-page-size-change").appendTo(t._$bottomPanel.find(".jtable-left-area")),t._$pageSizeChangeArea.append("<span>"+t.options.messages.pageSizeChangeLabel+": </span>");var i=e("<select></select>").appendTo(t._$pageSizeChangeArea);t._bootstrapThemeAddClass(i,"form-control");for(var o=0;o<t.options.pageSizes.length;o++)i.append('<option value="'+t.options.pageSizes[o]+'">'+t.options.pageSizes[o]+"</option>");i.val(t.options.pageSize),i.change(function(){t._changePageSize(parseInt(e(this).val()))})}},_createGotoPageInput:function(){var t=this;t.options.gotoPageArea&&"none"!=t.options.gotoPageArea&&(this._$gotoPageArea=e("<span></span>").addClass("jtable-goto-page").appendTo(t._$bottomPanel.find(".jtable-left-area")),this._$gotoPageArea.append("<span>"+t.options.messages.gotoPageLabel+": </span>"),"combobox"==t.options.gotoPageArea?(t._$gotoPageInput=e("<select></select>").appendTo(this._$gotoPageArea).data("pageCount",1).change(function(){t._changePage(parseInt(e(this).val()))}),t._bootstrapThemeAddClass(t._$gotoPageInput,"form-control"),t._$gotoPageInput.append('<option value="1">1</option>')):t._$gotoPageInput=e('<input type="text" maxlength="10" value="'+t._currentPageNo+'" />').appendTo(this._$gotoPageArea).keypress(function(e){if(13==e.which)e.preventDefault(),t._changePage(parseInt(t._$gotoPageInput.val()));else if(43==e.which)e.preventDefault(),t._changePage(parseInt(t._$gotoPageInput.val())+1);else if(45==e.which)e.preventDefault(),t._changePage(parseInt(t._$gotoPageInput.val())-1);else{var i=47<e.keyCode&&e.keyCode<58&&0==e.shiftKey&&0==e.altKey||8==e.keyCode||9==e.keyCode;i||e.preventDefault()}}))},_refreshGotoPageInput:function(){if(this.options.gotoPageArea&&"none"!=this.options.gotoPageArea){if(this._totalRecordCount<=0?this._$gotoPageArea.hide():this._$gotoPageArea.show(),"combobox"==this.options.gotoPageArea){var e=this._$gotoPageInput.data("pageCount"),t=this._calculatePageCount();if(e!=t){this._$gotoPageInput.empty();var i=1;t>1e4?i=100:t>5e3?i=10:t>2e3?i=5:t>1e3&&(i=2);for(var o=i;t>=o;o+=i)this._$gotoPageInput.append('<option value="'+o+'">'+o+"</option>");this._$gotoPageInput.data("pageCount",t)}}this._$gotoPageInput.val(this._currentPageNo)}},load:function(){this._currentPageNo=1,t.load.apply(this,arguments)},_setOption:function(e,i){t._setOption.apply(this,arguments),"pageSize"==e&&this._changePageSize(parseInt(i))},_changePageSize:function(e){if(e!=this.options.pageSize){this.options.pageSize=e;var t=this._calculatePageCount();this._currentPageNo>t&&(this._currentPageNo=t),this._currentPageNo<=0&&(this._currentPageNo=1);var i=this._$bottomPanel.find(".jtable-page-size-change select");if(i.length>0&&parseInt(i.val())!=e){var o=i.find("option[value="+e+"]");o.length>0&&i.val(e)}this._savePagingSettings(),this._reloadTable()}},_savePagingSettings:function(){this.options.saveUserPreferences&&this._setCookie("page-size",this.options.pageSize)},_createRecordLoadUrl:function(){var e=t._createRecordLoadUrl.apply(this,arguments);return e=this._addPagingInfoToUrl(e,this._currentPageNo)},_createJtParamsForLoading:function(){var e=t._createJtParamsForLoading.apply(this,arguments);return this.options.paging&&(e.jtStartIndex=(this._currentPageNo-1)*this.options.pageSize,e.jtPageSize=this.options.pageSize),e},_addRowToTable:function(e,i,o){return o&&this.options.paging?void this._reloadTable():void t._addRowToTable.apply(this,arguments)},_addRow:function(e,i){return i&&i.isNewRow&&this.options.paging?void this._reloadTable():void t._addRow.apply(this,arguments)},_removeRowsFromTable:function(){t._removeRowsFromTable.apply(this,arguments),this.options.paging&&(this._$tableRows.length<=0&&this._currentPageNo>1&&--this._currentPageNo,this._reloadTable())},_onRecordsLoaded:function(e){this.options.paging&&(this._totalRecordCount=e.TotalRecordCount,this._createPagingList(),this._createPagingInfo(),this._refreshGotoPageInput()),t._onRecordsLoaded.apply(this,arguments)},_addPagingInfoToUrl:function(e,t){if(!this.options.paging)return e;var i=(t-1)*this.options.pageSize,o=this.options.pageSize;return e+(e.indexOf("?")<0?"?":"&")+"jtStartIndex="+i+"&jtPageSize="+o},_createPagingList:function(){if(!(this.options.pageSize<=0||(this._$pagingListArea.empty(),this._totalRecordCount<=0))){var e=this._calculatePageCount();this._createFirstAndPreviousPageButtons(),"normal"==this.options.pageList&&this._createPageNumberButtons(this._calculatePageNumbers(e)),this._createLastAndNextPageButtons(e),this._bindClickEventsToPageNumberButtons()}},_createFirstAndPreviousPageButtons:function(){var t=e("<span></span>").addClass("jtable-page-number-first").html("&lt&lt").data("pageNumber",1).appendTo(this._$pagingListArea),i=e("<span></span>").addClass("jtable-page-number-previous").html("&lt").data("pageNumber",this._currentPageNo-1).appendTo(this._$pagingListArea);this._jqueryuiThemeAddClass(t,"ui-button ui-state-default","ui-state-hover"),this._jqueryuiThemeAddClass(i,"ui-button ui-state-default","ui-state-hover"),this._currentPageNo<=1&&(t.addClass("jtable-page-number-disabled"),i.addClass("jtable-page-number-disabled"),this._jqueryuiThemeAddClass(t,"ui-state-disabled"),this._jqueryuiThemeAddClass(i,"ui-state-disabled"))},_createLastAndNextPageButtons:function(t){var i=e("<span></span>").addClass("jtable-page-number-next").html("&gt").data("pageNumber",this._currentPageNo+1).appendTo(this._$pagingListArea),o=e("<span></span>").addClass("jtable-page-number-last").html("&gt&gt").data("pageNumber",t).appendTo(this._$pagingListArea);this._jqueryuiThemeAddClass(i,"ui-button ui-state-default","ui-state-hover"),this._jqueryuiThemeAddClass(o,"ui-button ui-state-default","ui-state-hover"),this._currentPageNo>=t&&(i.addClass("jtable-page-number-disabled"),o.addClass("jtable-page-number-disabled"),this._jqueryuiThemeAddClass(i,"ui-state-disabled"),this._jqueryuiThemeAddClass(o,"ui-state-disabled"))},_createPageNumberButtons:function(t){for(var i=0,o=0;o<t.length;o++)t[o]-i>1&&e("<span></span>").addClass("jtable-page-number-space").html("...").appendTo(this._$pagingListArea),this._createPageNumberButton(t[o]),i=t[o]},_createPageNumberButton:function(t){var i=e("<span></span>").addClass("jtable-page-number").html(t).data("pageNumber",t).appendTo(this._$pagingListArea);this._jqueryuiThemeAddClass(i,"ui-button ui-state-default","ui-state-hover"),this._currentPageNo==t&&(i.addClass("jtable-page-number-active jtable-page-number-disabled"),this._jqueryuiThemeAddClass(i,"ui-state-active"))},_calculatePageCount:function(){var e=Math.floor(this._totalRecordCount/this.options.pageSize);return this._totalRecordCount%this.options.pageSize!=0&&++e,e},_calculatePageNumbers:function(e){if(4>=e){for(var t=[],i=1;e>=i;++i)t.push(i);return t}var o=[1,2,e-1,e],a=this._normalizeNumber(this._currentPageNo-1,1,e,1),n=this._normalizeNumber(this._currentPageNo+1,1,e,1);return this._insertToArrayIfDoesNotExists(o,a),this._insertToArrayIfDoesNotExists(o,this._currentPageNo),this._insertToArrayIfDoesNotExists(o,n),o.sort(function(e,t){return e-t}),o},_createPagingInfo:function(){if(this._totalRecordCount<=0)return void this._$pageInfoSpan.empty();var e=(this._currentPageNo-1)*this.options.pageSize+1,t=this._currentPageNo*this.options.pageSize;if(t=this._normalizeNumber(t,e,this._totalRecordCount,0),t>=e){var i=this._formatString(this.options.messages.pagingInfo,e,t,this._totalRecordCount);this._$pageInfoSpan.html(i)}},_bindClickEventsToPageNumberButtons:function(){var t=this;t._$pagingListArea.find(".jtable-page-number,.jtable-page-number-previous,.jtable-page-number-next,.jtable-page-number-first,.jtable-page-number-last").not(".jtable-page-number-disabled").click(function(i){i.preventDefault(),t._changePage(e(this).data("pageNumber"))})},_changePage:function(e){return e=this._normalizeNumber(e,1,this._calculatePageCount(),1),e==this._currentPageNo?void this._refreshGotoPageInput():(this._currentPageNo=e,void this._reloadTable())}})}(jQuery),function(e){var t={_create:e.hik.jtable.prototype._create,_addColumnsToHeaderRow:e.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:e.hik.jtable.prototype._addCellsToRowUsingRecord,_onLoadingRecords:e.hik.jtable.prototype._onLoadingRecords,_onRecordsLoaded:e.hik.jtable.prototype._onRecordsLoaded,_onRowsRemoved:e.hik.jtable.prototype._onRowsRemoved};e.extend(!0,e.hik.jtable.prototype,{options:{selecting:!1,multiselect:!1,selectingCheckboxes:!1,selectOnRowClick:!0,selectionChanged:function(){}},_selectedRecordIdsBeforeLoad:null,_$selectAllCheckbox:null,_shiftKeyDown:!1,_create:function(){this.options.selecting&&this.options.selectingCheckboxes&&(++this._firstDataColumnOffset,this._bindKeyboardEvents()),t._create.apply(this,arguments)},_bindKeyboardEvents:function(){var t=this;e(document).keydown(function(e){switch(e.which){case 16:t._shiftKeyDown=!0}}).keyup(function(e){switch(e.which){case 16:t._shiftKeyDown=!1}})},selectedRows:function(){return this._getSelectedRows()},selectRows:function(e){this._selectRows(e),this._onSelectionChanged()},_addColumnsToHeaderRow:function(e){this.options.selecting&&this.options.selectingCheckboxes&&e.append(this.options.multiselect?this._createSelectAllHeader():this._createEmptyCommandHeader()),t._addColumnsToHeaderRow.apply(this,arguments)},_addCellsToRowUsingRecord:function(e){this.options.selecting&&this._makeRowSelectable(e),t._addCellsToRowUsingRecord.apply(this,arguments)},_onLoadingRecords:function(){this.options.selecting&&this._storeSelectionList(),t._onLoadingRecords.apply(this,arguments)},_onRecordsLoaded:function(){this.options.selecting&&this._restoreSelectionList(),t._onRecordsLoaded.apply(this,arguments)},_onRowsRemoved:function(e,i){this.options.selecting&&"reloading"!=i&&e.filter(".jtable-row-selected").length>0&&this._onSelectionChanged(),t._onRowsRemoved.apply(this,arguments)},_createSelectAllHeader:function(){var t=this,i=e('<th class=""></th>').addClass("jtable-command-column-header jtable-column-header-selecting");this._jqueryuiThemeAddClass(i,"ui-state-default");var o=e("<div />").addClass("jtable-column-header-container").appendTo(i);return t._$selectAllCheckbox=e('<input type="checkbox" />').appendTo(o).click(function(){if(t._$tableRows.length<=0)return void t._$selectAllCheckbox.attr("checked",!1);var e=t._$tableBody.find(">tr.jtable-data-row");t._$selectAllCheckbox.is(":checked")?t._selectRows(e):t._deselectRows(e),t._onSelectionChanged()}),i},_storeSelectionList:function(){var t=this;t.options.selecting&&(t._selectedRecordIdsBeforeLoad=[],t._getSelectedRows().each(function(){t._selectedRecordIdsBeforeLoad.push(t._getKeyValueOfRecord(e(this).data("record")))}))},_restoreSelectionList:function(){var t=this;if(t.options.selecting){for(var i=0,o=0;o<t._$tableRows.length;++o){var a=t._getKeyValueOfRecord(t._$tableRows[o].data("record"));e.inArray(a,t._selectedRecordIdsBeforeLoad)>-1&&(t._selectRows(t._$tableRows[o]),++i)}t._selectedRecordIdsBeforeLoad.length>0&&t._selectedRecordIdsBeforeLoad.length!=i&&t._onSelectionChanged(),t._selectedRecordIdsBeforeLoad=[],t._refreshSelectAllCheckboxState()}},_getSelectedRows:function(){return this._$tableBody.find(">tr.jtable-row-selected")},_makeRowSelectable:function(t){var i=this;if(i.options.selectOnRowClick&&t.click(function(){i._invertRowSelection(t)}),i.options.selectingCheckboxes){var o=e("<td></td>").addClass("jtable-selecting-column"),a=e('<input type="checkbox" />').appendTo(o);i.options.selectOnRowClick||a.click(function(){i._invertRowSelection(t)}),t.append(o)}},_invertRowSelection:function(e){if(e.hasClass("jtable-row-selected"))this._deselectRows(e);else if(this._shiftKeyDown){var t=this._findRowIndex(e),i=this._findFirstSelectedRowIndexBeforeIndex(t)+1;if(i>0&&t>i)this._selectRows(this._$tableBody.find("tr").slice(i,t+1));else{var o=this._findFirstSelectedRowIndexAfterIndex(t)-1;this._selectRows(o>t?this._$tableBody.find("tr").slice(t,o+1):e)}}else this._selectRows(e);this._onSelectionChanged()},_findFirstSelectedRowIndexBeforeIndex:function(e){for(var t=e-1;t>=0;--t)if(this._$tableRows[t].hasClass("jtable-row-selected"))return t;return-1},_findFirstSelectedRowIndexAfterIndex:function(e){for(var t=e+1;t<this._$tableRows.length;++t)if(this._$tableRows[t].hasClass("jtable-row-selected"))return t;return-1},_selectRows:function(e){this.options.multiselect||this._deselectRows(this._getSelectedRows()),e.addClass("jtable-row-selected"),this._jqueryuiThemeAddClass(e,"ui-state-highlight"),this.options.selectingCheckboxes&&e.find(">td.jtable-selecting-column >input").prop("checked",!0),this._refreshSelectAllCheckboxState()},_deselectRows:function(e){e.removeClass("jtable-row-selected ui-state-highlight"),this.options.selectingCheckboxes&&e.find(">td.jtable-selecting-column >input").prop("checked",!1),this._refreshSelectAllCheckboxState()},_refreshSelectAllCheckboxState:function(){if(this.options.selectingCheckboxes&&this.options.multiselect){var e=this._$tableRows.length,t=this._getSelectedRows().length;0==t?(this._$selectAllCheckbox.prop("indeterminate",!1),this._$selectAllCheckbox.attr("checked",!1)):t==e?(this._$selectAllCheckbox.prop("indeterminate",!1),this._$selectAllCheckbox.attr("checked",!0)):(this._$selectAllCheckbox.attr("checked",!1),this._$selectAllCheckbox.prop("indeterminate",!0))}},_onSelectionChanged:function(){this._trigger("selectionChanged",null,{})}})}(jQuery),function(e){var t={_initializeFields:e.hik.jtable.prototype._initializeFields,_normalizeFieldOptions:e.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:e.hik.jtable.prototype._createHeaderCellForField,_createRecordLoadUrl:e.hik.jtable.prototype._createRecordLoadUrl,_createJtParamsForLoading:e.hik.jtable.prototype._createJtParamsForLoading};e.extend(!0,e.hik.jtable.prototype,{options:{sorting:!1,multiSorting:!1,defaultSorting:""},_lastSorting:null,_initializeFields:function(){t._initializeFields.apply(this,arguments),this._lastSorting=[],this.options.sorting&&this._buildDefaultSortingArray()},_normalizeFieldOptions:function(e,i){t._normalizeFieldOptions.apply(this,arguments),i.sorting=0!=i.sorting},_createHeaderCellForField:function(e,i){var o=t._createHeaderCellForField.apply(this,arguments);return this.options.sorting&&i.sorting&&this._makeColumnSortable(o,e),o},_createRecordLoadUrl:function(){var e=t._createRecordLoadUrl.apply(this,arguments);return e=this._addSortingInfoToUrl(e)},_buildDefaultSortingArray:function(){var t=this;e.each(t.options.defaultSorting.split(","),function(i,o){e.each(t.options.fields,function(e,i){if(i.sorting){var a=o.indexOf(e);a>-1&&t._lastSorting.push(o.toUpperCase().indexOf(" DESC",a)>-1?{fieldName:e,sortOrder:"DESC"}:{fieldName:e,sortOrder:"ASC"})}})})},_makeColumnSortable:function(t,i){var o=this;t.addClass("jtable-column-header-sortable").click(function(e){e.preventDefault(),o.options.multiSorting&&e.ctrlKey||(o._lastSorting=[]),o._sortTableByColumn(t)}),e.each(this._lastSorting,function(e,o){o.fieldName==i&&t.addClass("DESC"==o.sortOrder?"jtable-column-header-sorted-desc":"jtable-column-header-sorted-asc")})},_sortTableByColumn:function(e){0==this._lastSorting.length&&e.siblings().removeClass("jtable-column-header-sorted-asc jtable-column-header-sorted-desc");for(var t=0;t<this._lastSorting.length;t++)this._lastSorting[t].fieldName==e.data("fieldName")&&this._lastSorting.splice(t--,1);e.hasClass("jtable-column-header-sorted-asc")?(e.removeClass("jtable-column-header-sorted-asc").addClass("jtable-column-header-sorted-desc"),this._lastSorting.push({fieldName:e.data("fieldName"),sortOrder:"DESC"})):(e.removeClass("jtable-column-header-sorted-desc").addClass("jtable-column-header-sorted-asc"),this._lastSorting.push({fieldName:e.data("fieldName"),sortOrder:"ASC"})),this._reloadTable()},_addSortingInfoToUrl:function(t){if(!this.options.sorting||0==this._lastSorting.length)return t;var i=[];return e.each(this._lastSorting,function(e,t){i.push(t.fieldName+" "+t.sortOrder)}),t+(t.indexOf("?")<0?"?":"&")+"jtSorting="+i.join(",")},_createJtParamsForLoading:function(){var i=t._createJtParamsForLoading.apply(this,arguments);if(this.options.sorting&&this._lastSorting.length){var o=[];e.each(this._lastSorting,function(e,t){o.push(t.fieldName+" "+t.sortOrder)}),i.jtSorting=o.join(",")}return i}})}(jQuery),function(e){e.extend(!0,e.hik.jtable.prototype,{_getPropertyOfObject:function(e,t){if(t.indexOf(".")<0)return e[t];var i=t.substring(0,t.indexOf(".")),o=t.substring(t.indexOf(".")+1);return this._getPropertyOfObject(e[i],o)},_setPropertyOfObject:function(e,t,i){if(t.indexOf(".")<0)e[t]=i;else{var o=t.substring(0,t.indexOf(".")),a=t.substring(t.indexOf(".")+1);this._setPropertyOfObject(e[o],a,i)}},_insertToArrayIfDoesNotExists:function(t,i){e.inArray(i,t)<0&&t.push(i)},_findIndexInArray:function(e,t,i){i||(i=function(e,t){return e==t});for(var o=0;o<t.length;o++)if(i(e,t[o]))return o;return-1},_normalizeNumber:function(e,t,i,o){return void 0==e||null==e||isNaN(e)?o:t>e?t:e>i?i:e},_formatString:function(){if(0==arguments.length)return null;for(var e=arguments[0],t=1;t<arguments.length;t++){var i="{"+(t-1)+"}";e=e.replace(i,arguments[t])}return e},_isDeferredObject:function(e){return e.then&&e.done&&e.fail},_logDebug:function(e){window.console&&console.log("jTable DEBUG: "+e)},_logInfo:function(e){window.console&&console.log("jTable INFO: "+e)},_logWarn:function(e){window.console&&console.log("jTable WARNING: "+e)},_logError:function(e){window.console&&console.log("jTable ERROR: "+e)}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,i=Number(arguments[1])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=t);t>i;i++)if(i in this&&this[i]===e)return i;return-1}),e.fn.serializeWithChkBox=function(){var t=e(this).find("select").add(e(this).find("input[type!=checkbox]")).add(e(this).find("textarea")).serialize();return e(this).find("input[type=checkbox]").each(function(){var i=e(this).is(":checked")?e(this).val():"0";t+="&"+e(this).attr("name")+"="+i}),t}}(jQuery),function(e){"use strict";var t={init:function(i){var o=this;return o.data("jqv")&&null!=o.data("jqv")||(i=t._saveOptions(o,i),e(document).on("click",".formError",function(){e(this).fadeOut(150,function(){e(this).parent(".formErrorOuter").remove(),e(this).remove()})})),this},attach:function(i){var o,a=this;return o=i?t._saveOptions(a,i):a.data("jqv"),o.validateAttribute=a.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",o.binded&&(a.on(o.validationEventTrigger,"["+o.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",t._onFieldEvent),a.on("click","["+o.validateAttribute+"*=validate][type=checkbox],["+o.validateAttribute+"*=validate][type=radio]",t._onFieldEvent),a.on(o.validationEventTrigger,"["+o.validateAttribute+"*=validate][class*=datepicker]",{delay:300},t._onFieldEvent)),o.autoPositionUpdate&&e(window).bind("resize",{noAnimation:!0,formElem:a},t.updatePromptsPosition),a.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",t._submitButtonClick),a.removeData("jqv_submitButton"),a.on("submit",t._onSubmitEvent),this},detach:function(){var i=this,o=i.data("jqv");return i.find("["+o.validateAttribute+"*=validate]").not("[type=checkbox]").off(o.validationEventTrigger,t._onFieldEvent),i.find("["+o.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",t._onFieldEvent),i.off("submit",t.onAjaxFormComplete),i.off("submit",t.onAjaxFormComplete),i.removeData("jqv"),i.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",t._submitButtonClick),i.removeData("jqv_submitButton"),o.autoPositionUpdate&&e(window).unbind("resize",t.updatePromptsPosition),this},validate:function(){var i=e(this),o=null;if(i.is("form")||i.hasClass("validationEngineContainer")){if(i.hasClass("validating"))return!1;i.addClass("validating");var a=i.data("jqv"),o=t._validateFields(this);setTimeout(function(){i.removeClass("validating")},100),o&&a.onSuccess?a.onSuccess():!o&&a.onFailure&&a.onFailure()}else if(i.is("form")||i.hasClass("validationEngineContainer"))i.removeClass("validating");else{var n=i.closest("form, .validationEngineContainer"),a=n.data("jqv")?n.data("jqv"):e.validationEngine.defaults,o=t._validateField(i,a);o&&a.onFieldSuccess?a.onFieldSuccess():a.onFieldFailure&&a.InvalidFields.length>0&&a.onFieldFailure()}return a.onValidationComplete?!!a.onValidationComplete(n,o):o},updatePromptsPosition:function(i){if(i&&this==window)var o=i.data.formElem,a=i.data.noAnimation;else var o=e(this.closest("form, .validationEngineContainer"));var n=o.data("jqv");return o.find("["+n.validateAttribute+"*=validate]").not(":disabled").each(function(){var i=e(this);n.prettySelect&&i.is(":hidden")&&(i=o.find("#"+n.usePrefix+i.attr("id")+n.useSuffix));var s=t._getPrompt(i),r=e(s).find(".formErrorContent").html();s&&t._updatePrompt(i,e(s),r,void 0,!1,n,a)}),this},showPrompt:function(e,i,o,a){var n=this.closest("form, .validationEngineContainer"),s=n.data("jqv");return s||(s=t._saveOptions(this,s)),o&&(s.promptPosition=o),s.showArrow=1==a,t._showPrompt(this,e,i,!1,s),this},hide:function(){var i,o=e(this).closest("form, .validationEngineContainer"),a=o.data("jqv"),n=a&&a.fadeDuration?a.fadeDuration:.3;return i=e(this).is("form")||e(this).hasClass("validationEngineContainer")?"parentForm"+t._getClassName(e(this).attr("id")):t._getClassName(e(this).attr("id"))+"formError",e("."+i).fadeTo(n,.3,function(){e(this).parent(".formErrorOuter").remove(),e(this).remove()}),this},hideAll:function(){var t=this,i=t.data("jqv"),o=i?i.fadeDuration:300;return e(".formError").fadeTo(o,300,function(){e(this).parent(".formErrorOuter").remove(),e(this).remove()}),this},_onFieldEvent:function(i){var o=e(this),a=o.closest("form, .validationEngineContainer"),n=a.data("jqv");n.eventTrigger="field",window.setTimeout(function(){t._validateField(o,n),0==n.InvalidFields.length&&n.onFieldSuccess?n.onFieldSuccess():n.InvalidFields.length>0&&n.onFieldFailure&&n.onFieldFailure()},i.data?i.data.delay:0)},_onSubmitEvent:function(){var i=e(this),o=i.data("jqv");if(i.data("jqv_submitButton")){var a=e("#"+i.data("jqv_submitButton"));if(a&&a.length>0&&(a.hasClass("validate-skip")||"true"==a.attr("data-validation-engine-skip")))return!0}o.eventTrigger="submit";var n=t._validateFields(i);return n&&o.ajaxFormValidation?(t._validateFormWithAjax(i,o),!1):o.onValidationComplete?!!o.onValidationComplete(i,n):n},_checkAjaxStatus:function(t){var i=!0;return e.each(t.ajaxValidCache,function(e,t){return t?void 0:(i=!1,!1)}),i},_checkAjaxFieldStatus:function(e,t){return 1==t.ajaxValidCache[e]},_validateFields:function(i){var o=i.data("jqv"),a=!1;i.trigger("jqv.form.validating");var n=null;if(i.find("["+o.validateAttribute+"*=validate]").not(":disabled").each(function(){var s=e(this),r=[];if(e.inArray(s.attr("name"),r)<0){if(a|=t._validateField(s,o),a&&null==n&&(n=s.is(":hidden")&&o.prettySelect?s=i.find("#"+o.usePrefix+t._jqSelector(s.attr("id"))+o.useSuffix):s),o.doNotShowAllErrosOnSubmit)return!1;if(r.push(s.attr("name")),1==o.showOneMessage&&a)return!1}}),i.trigger("jqv.form.result",[a]),a){if(o.scroll){var s=n.offset().top,r=n.offset().left,l=o.promptPosition;if("string"==typeof l&&-1!=l.indexOf(":")&&(l=l.substring(0,l.indexOf(":"))),"bottomRight"!=l&&"bottomLeft"!=l){var d=t._getPrompt(n);d&&(s=d.offset().top)}if(o.scrollOffset&&(s-=o.scrollOffset),o.isOverflown){var c=e(o.overflownDIV);
if(!c.length)return!1;var u=c.scrollTop(),p=-parseInt(c.offset().top);s+=u+p-5;var h=e(o.overflownDIV+":not(:animated)");h.animate({scrollTop:s},1100,function(){o.focusFirstField&&n.focus()})}else e("html, body").animate({scrollTop:s},1100,function(){o.focusFirstField&&n.focus()}),e("html, body").animate({scrollLeft:r},1100)}else o.focusFirstField&&n.focus();return!1}return!0},_validateFormWithAjax:function(i,o){var a=i.serialize(),n=o.ajaxFormValidationMethod?o.ajaxFormValidationMethod:"GET",s=o.ajaxFormValidationURL?o.ajaxFormValidationURL:i.attr("action"),r=o.dataType?o.dataType:"json";e.ajax({type:n,url:s,cache:!1,dataType:r,data:a,form:i,methods:t,options:o,beforeSend:function(){return o.onBeforeAjaxFormValidation(i,o)},error:function(e,i){t._ajaxError(e,i)},success:function(a){if("json"==r&&a!==!0){for(var n=!1,s=0;s<a.length;s++){var l=a[s],d=l[0],c=e(e("#"+d)[0]);if(1==c.length){var u=l[2];if(1==l[1])if(""!=u&&u){if(o.allrules[u]){var p=o.allrules[u].alertTextOk;p&&(u=p)}o.showPrompts&&t._showPrompt(c,u,"pass",!1,o,!0)}else t._closePrompt(c);else{if(n|=!0,o.allrules[u]){var p=o.allrules[u].alertText;p&&(u=p)}o.showPrompts&&t._showPrompt(c,u,"",!1,o,!0)}}}o.onAjaxFormComplete(!n,i,a,o)}else o.onAjaxFormComplete(!0,i,a,o)}})},_validateField:function(i,o,a){if(i.attr("id")||(i.attr("id","form-validation-field-"+e.validationEngine.fieldIdCounter),++e.validationEngine.fieldIdCounter),!o.validateNonVisibleFields&&(i.is(":hidden")&&!o.prettySelect||i.parent().is(":hidden")))return!1;var n=i.attr(o.validateAttribute),s=/validate\[(.*)\]/.exec(n);if(!s)return!1;var r=s[1],l=r.split(/\[|,|\]/),d=!1,c=i.attr("name"),u="",p="",h=!1,f=!1;o.isError=!1,o.showArrow=!0,o.maxErrorsPerField>0&&(f=!0);for(var m=e(i.closest("form, .validationEngineContainer")),g=0;g<l.length;g++)l[g]=l[g].replace(" ",""),""===l[g]&&delete l[g];for(var g=0,v=0;g<l.length;g++){if(f&&v>=o.maxErrorsPerField){if(!h){var _=e.inArray("required",l);h=-1!=_&&_>=g}break}var b=void 0;switch(l[g]){case"required":h=!0,b=t._getErrorMessage(m,i,l[g],l,g,o,t._required);break;case"custom":b=t._getErrorMessage(m,i,l[g],l,g,o,t._custom);break;case"groupRequired":var y="["+o.validateAttribute+"*="+l[g+1]+"]",C=m.find(y).eq(0);C[0]!=i[0]&&(t._validateField(C,o,a),o.showArrow=!0),b=t._getErrorMessage(m,i,l[g],l,g,o,t._groupRequired),b&&(h=!0),o.showArrow=!1;break;case"ajax":b=t._ajax(i,l,g,o),b&&(p="load");break;case"minSize":b=t._getErrorMessage(m,i,l[g],l,g,o,t._minSize);break;case"maxSize":b=t._getErrorMessage(m,i,l[g],l,g,o,t._maxSize);break;case"min":b=t._getErrorMessage(m,i,l[g],l,g,o,t._min);break;case"max":b=t._getErrorMessage(m,i,l[g],l,g,o,t._max);break;case"past":b=t._getErrorMessage(m,i,l[g],l,g,o,t._past);break;case"future":b=t._getErrorMessage(m,i,l[g],l,g,o,t._future);break;case"dateRange":var y="["+o.validateAttribute+"*="+l[g+1]+"]";o.firstOfGroup=m.find(y).eq(0),o.secondOfGroup=m.find(y).eq(1),(o.firstOfGroup[0].value||o.secondOfGroup[0].value)&&(b=t._getErrorMessage(m,i,l[g],l,g,o,t._dateRange)),b&&(h=!0),o.showArrow=!1;break;case"dateTimeRange":var y="["+o.validateAttribute+"*="+l[g+1]+"]";o.firstOfGroup=m.find(y).eq(0),o.secondOfGroup=m.find(y).eq(1),(o.firstOfGroup[0].value||o.secondOfGroup[0].value)&&(b=t._getErrorMessage(m,i,l[g],l,g,o,t._dateTimeRange)),b&&(h=!0),o.showArrow=!1;break;case"maxCheckbox":i=e(m.find("input[name='"+c+"']")),b=t._getErrorMessage(m,i,l[g],l,g,o,t._maxCheckbox);break;case"minCheckbox":i=e(m.find("input[name='"+c+"']")),b=t._getErrorMessage(m,i,l[g],l,g,o,t._minCheckbox);break;case"equals":b=t._getErrorMessage(m,i,l[g],l,g,o,t._equals);break;case"funcCall":b=t._getErrorMessage(m,i,l[g],l,g,o,t._funcCall);break;case"creditCard":b=t._getErrorMessage(m,i,l[g],l,g,o,t._creditCard);break;case"condRequired":b=t._getErrorMessage(m,i,l[g],l,g,o,t._condRequired),void 0!==b&&(h=!0)}var w=!1;if("object"==typeof b)switch(b.status){case"_break":w=!0;break;case"_error":b=b.message;break;case"_error_no_prompt":return!0}if(w)break;"string"==typeof b&&(u+=b+"<br/>",o.isError=!0,v++)}!h&&!i.val()&&i.val().length<1&&(o.isError=!1);var R=i.prop("type"),x=i.data("promptPosition")||o.promptPosition;("radio"==R||"checkbox"==R)&&m.find("input[name='"+c+"']").size()>1&&(i=e("inline"===x?m.find("input[name='"+c+"'][type!=hidden]:last"):m.find("input[name='"+c+"'][type!=hidden]:first")),o.showArrow=!1),i.is(":hidden")&&o.prettySelect&&(i=m.find("#"+o.usePrefix+t._jqSelector(i.attr("id"))+o.useSuffix)),o.isError&&o.showPrompts?t._showPrompt(i,u,p,!1,o):d||t._closePrompt(i),d||i.trigger("jqv.field.result",[i,o.isError,u]);var k=e.inArray(i[0],o.InvalidFields);return-1==k?o.isError&&o.InvalidFields.push(i[0]):o.isError||o.InvalidFields.splice(k,1),t._handleStatusCssClasses(i,o),o.isError&&o.onFieldFailure&&o.onFieldFailure(i),!o.isError&&o.onFieldSuccess&&o.onFieldSuccess(i),o.isError},_handleStatusCssClasses:function(e,t){t.addSuccessCssClassToField&&e.removeClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&e.removeClass(t.addFailureCssClassToField),t.addSuccessCssClassToField&&!t.isError&&e.addClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&t.isError&&e.addClass(t.addFailureCssClassToField)},_getErrorMessage:function(i,o,a,n,s,r,l){var d=jQuery.inArray(a,n);if("custom"===a||"funcCall"===a){var c=n[d+1];a=a+"["+c+"]",delete n[d]}var u,p=a,h=o.attr(o.attr("data-validation-engine")?"data-validation-engine":"class"),f=h.split(" ");if(u="future"==a||"past"==a||"maxCheckbox"==a||"minCheckbox"==a?l(i,o,n,s,r):l(o,n,s,r),void 0!=u){var m=t._getCustomErrorMessage(e(o),f,p,r);m&&(u=m)}return u},_getCustomErrorMessage:function(e,i,o,a){var n=!1,s=/^custom\[.*\]$/.test(o)?t._validityProp.custom:t._validityProp[o];if(void 0!=s&&(n=e.attr("data-errormessage-"+s),void 0!=n))return n;if(n=e.attr("data-errormessage"),void 0!=n)return n;var r="#"+e.attr("id");if("undefined"!=typeof a.custom_error_messages[r]&&"undefined"!=typeof a.custom_error_messages[r][o])n=a.custom_error_messages[r][o].message;else if(i.length>0)for(var l=0;l<i.length&&i.length>0;l++){var d="."+i[l];if("undefined"!=typeof a.custom_error_messages[d]&&"undefined"!=typeof a.custom_error_messages[d][o]){n=a.custom_error_messages[d][o].message;break}}return n||"undefined"==typeof a.custom_error_messages[o]||"undefined"==typeof a.custom_error_messages[o].message||(n=a.custom_error_messages[o].message),n},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(t,i,o,a,n){switch(t.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var s=e.trim(t.val()),r=e.trim(t.attr("data-validation-placeholder")),l=e.trim(t.attr("placeholder"));if(!s||r&&s==r||l&&s==l)return a.allrules[i[o]].alertText;break;case"radio":case"checkbox":if(n){if(!t.attr("checked"))return a.allrules[i[o]].alertTextCheckboxMultiple;break}var d=t.closest("form, .validationEngineContainer"),c=t.attr("name");if(0==d.find("input[name='"+c+"']:checked").size())return 1==d.find("input[name='"+c+"']:visible").size()?a.allrules[i[o]].alertTextCheckboxe:a.allrules[i[o]].alertTextCheckboxMultiple}},_groupRequired:function(i,o,a,n){var s="["+n.validateAttribute+"*="+o[a+1]+"]",r=!1;return i.closest("form, .validationEngineContainer").find(s).each(function(){return t._required(e(this),o,a,n)?void 0:(r=!0,!1)}),r?void 0:n.allrules[o[a]].alertText},_custom:function(e,t,i,o){var a,n=t[i+1],s=o.allrules[n];if(!s)return void alert("jqv:custom rule not found - "+n);if(s.regex){var r=s.regex;if(!r)return void alert("jqv:custom regex not found - "+n);var l=new RegExp(r);if(!l.test(e.val()))return o.allrules[n].alertText}else{if(!s.func)return void alert("jqv:custom type not allowed "+n);if(a=s.func,"function"!=typeof a)return void alert("jqv:custom parameter 'function' is no function - "+n);if(!a(e,t,i,o))return o.allrules[n].alertText}},_funcCall:function(e,t,i,o){var a,n=t[i+1];if(n.indexOf(".")>-1){for(var s=n.split("."),r=window;s.length;)r=r[s.shift()];a=r}else a=window[n]||o.customFunctions[n];return"function"==typeof a?a(e,t,i,o):void 0},_equals:function(t,i,o,a){var n=i[o+1];return t.val()!=e("#"+n).val()?a.allrules.equals.alertText:void 0},_maxSize:function(e,t,i,o){var a=t[i+1],n=e.val().length;if(n>a){var s=o.allrules.maxSize;return s.alertText+a+s.alertText2}},_minSize:function(e,t,i,o){var a=t[i+1],n=e.val().length;if(a>n){var s=o.allrules.minSize;return s.alertText+a+s.alertText2}},_min:function(e,t,i,o){var a=parseFloat(t[i+1]),n=parseFloat(e.val());if(a>n){var s=o.allrules.min;return s.alertText2?s.alertText+a+s.alertText2:s.alertText+a}},_max:function(e,t,i,o){var a=parseFloat(t[i+1]),n=parseFloat(e.val());if(n>a){var s=o.allrules.max;return s.alertText2?s.alertText+a+s.alertText2:s.alertText+a}},_past:function(i,o,a,n,s){var r,l=a[n+1],d=e(i.find("input[name='"+l.replace(/^#+/,"")+"']"));if("now"==l.toLowerCase())r=new Date;else if(void 0!=d.val()){if(d.is(":disabled"))return;r=t._parseDateValidation(d.val())}else r=t._parseDateValidation(l);var c=t._parseDateValidation(o.val());if(c>r){var u=s.allrules.past;return u.alertText2?u.alertText+t._dateToString(r)+u.alertText2:u.alertText+t._dateToString(r)}},_future:function(i,o,a,n,s){var r,l=a[n+1],d=e(i.find("input[name='"+l.replace(/^#+/,"")+"']"));if("now"==l.toLowerCase())r=new Date;else if(void 0!=d.val()){if(d.is(":disabled"))return;r=t._parseDateValidation(d.val())}else r=t._parseDateValidation(l);var c=t._parseDateValidation(o.val());if(r>c){var u=s.allrules.future;return u.alertText2?u.alertText+t._dateToString(r)+u.alertText2:u.alertText+t._dateToString(r)}},_isDate:function(e){var t=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);return t.test(e)},_isDateTime:function(e){var t=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);return t.test(e)},_dateCompare:function(e,t){return new Date(e.toString())<new Date(t.toString())},_dateRange:function(e,i,o,a){return!a.firstOfGroup[0].value&&a.secondOfGroup[0].value||a.firstOfGroup[0].value&&!a.secondOfGroup[0].value?a.allrules[i[o]].alertText+a.allrules[i[o]].alertText2:t._isDate(a.firstOfGroup[0].value)&&t._isDate(a.secondOfGroup[0].value)&&t._dateCompare(a.firstOfGroup[0].value,a.secondOfGroup[0].value)?void 0:a.allrules[i[o]].alertText+a.allrules[i[o]].alertText2},_dateTimeRange:function(e,i,o,a){return!a.firstOfGroup[0].value&&a.secondOfGroup[0].value||a.firstOfGroup[0].value&&!a.secondOfGroup[0].value?a.allrules[i[o]].alertText+a.allrules[i[o]].alertText2:t._isDateTime(a.firstOfGroup[0].value)&&t._isDateTime(a.secondOfGroup[0].value)&&t._dateCompare(a.firstOfGroup[0].value,a.secondOfGroup[0].value)?void 0:a.allrules[i[o]].alertText+a.allrules[i[o]].alertText2},_maxCheckbox:function(e,t,i,o,a){var n=i[o+1],s=t.attr("name"),r=e.find("input[name='"+s+"']:checked").size();return r>n?(a.showArrow=!1,a.allrules.maxCheckbox.alertText2?a.allrules.maxCheckbox.alertText+" "+n+" "+a.allrules.maxCheckbox.alertText2:a.allrules.maxCheckbox.alertText):void 0},_minCheckbox:function(e,t,i,o,a){var n=i[o+1],s=t.attr("name"),r=e.find("input[name='"+s+"']:checked").size();return n>r?(a.showArrow=!1,a.allrules.minCheckbox.alertText+" "+n+" "+a.allrules.minCheckbox.alertText2):void 0},_creditCard:function(e,t,i,o){var a=!1,n=e.val().replace(/ +/g,"").replace(/-+/g,""),s=n.length;if(s>=14&&16>=s&&parseInt(n)>0){var r,l=0,d=1,c=new String;i=s-1;do r=parseInt(n.charAt(i)),c+=d++%2==0?2*r:r;while(--i>=0);for(i=0;i<c.length;i++)l+=parseInt(c.charAt(i));a=l%10==0}return a?void 0:o.allrules.creditCard.alertText},_ajax:function(i,o,a,n){var s=o[a+1],r=n.allrules[s],l=r.extraData,d=r.extraDataDynamic,c={fieldId:i.attr("id"),fieldValue:i.val()};if("object"==typeof l)e.extend(c,l);else if("string"==typeof l){var u=l.split("&");for(a=0;a<u.length;a++){var p=u[a].split("=");p[0]&&p[0]&&(c[p[0]]=p[1])}}if(d){var h=String(d).split(",");for(a=0;a<h.length;a++){var f=h[a];if(e(f).length){{var m=i.closest("form, .validationEngineContainer").find(f).val();f.replace("#","")+"="+escape(m)}c[f.replace("#","")]=m}}}return"field"==n.eventTrigger&&delete n.ajaxValidCache[i.attr("id")],n.isError||t._checkAjaxFieldStatus(i.attr("id"),n)?void 0:(e.ajax({type:n.ajaxFormValidationMethod,url:r.url,cache:!1,dataType:"json",data:c,field:i,rule:r,methods:t,options:n,beforeSend:function(){},error:function(e,i){t._ajaxError(e,i)},success:function(o){var a=o[0],s=e("#"+a).eq(0);if(1==s.length){var l=o[1],d=o[2];if(l){if(n.ajaxValidCache[a]=!0,d){if(n.allrules[d]){var c=n.allrules[d].alertTextOk;c&&(d=c)}}else d=r.alertTextOk;n.showPrompts&&(d?t._showPrompt(s,d,"pass",!0,n):t._closePrompt(s)),"submit"==n.eventTrigger&&i.closest("form").submit()}else{if(n.ajaxValidCache[a]=!1,n.isError=!0,d){if(n.allrules[d]){var c=n.allrules[d].alertText;c&&(d=c)}}else d=r.alertText;n.showPrompts&&t._showPrompt(s,d,"",!0,n)}}s.trigger("jqv.field.result",[s,n.isError,d])}}),r.alertTextLoad)},_ajaxError:function(e,t){0==e.status&&null==t?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+e.status+" "+t)},_dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},_parseDateValidation:function(e){var t=e.split("-");return t==e&&(t=e.split("/")),t==e?(t=e.split("."),new Date(t[2],t[1]-1,t[0])):new Date(t[0],t[1]-1,t[2])},_showPrompt:function(i,o,a,n,s,r){var l=t._getPrompt(i);r&&(l=!1),e.trim(o)&&(l?t._updatePrompt(i,l,o,a,n,s):t._buildPrompt(i,o,a,n,s))},_buildPrompt:function(i,o,a,n,s){var r=e("<div>");switch(r.addClass(t._getClassName(i.attr("id"))+"formError"),r.addClass("parentForm"+t._getClassName(i.closest("form, .validationEngineContainer").attr("id"))),r.addClass("formError"),a){case"pass":r.addClass("greenPopup");break;case"load":r.addClass("blackPopup")}n&&r.addClass("ajaxed");var l=(e("<div>").addClass("formErrorContent").html(o).appendTo(r),i.data("promptPosition")||s.promptPosition);if(s.showArrow){var d=e("<div>").addClass("formErrorArrow");if("string"==typeof l){var c=l.indexOf(":");-1!=c&&(l=l.substring(0,c))}switch(l){case"bottomLeft":case"bottomRight":r.find(".formErrorContent").before(d),d.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');break;case"topLeft":case"topRight":d.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>'),r.append(d)}}s.addPromptClass&&r.addClass(s.addPromptClass);var u=i.attr("data-required-class");if(void 0!==u)r.addClass(u);else if(s.prettySelect&&e("#"+i.attr("id")).next().is("select")){var p=e("#"+i.attr("id").substr(s.usePrefix.length).substring(s.useSuffix.length)).attr("data-required-class");void 0!==p&&r.addClass(p)}r.css({opacity:0}),"inline"===l?(r.addClass("inline"),"undefined"!=typeof i.attr("data-prompt-target")&&e("#"+i.attr("data-prompt-target")).length>0?r.appendTo(e("#"+i.attr("data-prompt-target"))):i.after(r)):i.before(r);var c=t._calculatePosition(i,r,s);return r.css({position:"inline"===l?"relative":"absolute",top:c.callerTopPosition,left:c.callerleftPosition,marginTop:c.marginTopSize,opacity:0}).data("callerField",i),s.autoHidePrompt&&setTimeout(function(){r.animate({opacity:0},function(){r.closest(".formErrorOuter").remove(),r.remove()})},s.autoHideDelay),r.animate({opacity:.87})},_updatePrompt:function(e,i,o,a,n,s,r){if(i){"undefined"!=typeof a&&("pass"==a?i.addClass("greenPopup"):i.removeClass("greenPopup"),"load"==a?i.addClass("blackPopup"):i.removeClass("blackPopup")),n?i.addClass("ajaxed"):i.removeClass("ajaxed"),i.find(".formErrorContent").html(o);var l=t._calculatePosition(e,i,s),d={top:l.callerTopPosition,left:l.callerleftPosition,marginTop:l.marginTopSize};r?i.css(d):i.animate(d)}},_closePrompt:function(e){var i=t._getPrompt(e);i&&i.fadeTo("fast",0,function(){i.parent(".formErrorOuter").remove(),i.remove()})},closePrompt:function(e){return t._closePrompt(e)},_getPrompt:function(i){var o=e(i).closest("form, .validationEngineContainer").attr("id"),a=t._getClassName(i.attr("id"))+"formError",n=e("."+t._escapeExpression(a)+".parentForm"+o)[0];return n?e(n):void 0},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(t){var i=e(document),o=e("body"),a=t&&t.hasClass("rtl")||t&&"rtl"===(t.attr("dir")||"").toLowerCase()||i.hasClass("rtl")||"rtl"===(i.attr("dir")||"").toLowerCase()||o.hasClass("rtl")||"rtl"===(o.attr("dir")||"").toLowerCase();return Boolean(a)},_calculatePosition:function(e,t,i){var o,a,n,s=e.width(),r=e.position().left,l=e.position().top,d=(e.height(),t.height());o=a=0,n=-d;var c=e.data("promptPosition")||i.promptPosition,u="",p="",h=0,f=0;switch("string"==typeof c&&-1!=c.indexOf(":")&&(u=c.substring(c.indexOf(":")+1),c=c.substring(0,c.indexOf(":")),-1!=u.indexOf(",")&&(p=u.substring(u.indexOf(",")+1),u=u.substring(0,u.indexOf(",")),f=parseInt(p),isNaN(f)&&(f=0)),h=parseInt(u),isNaN(u)&&(u=0)),c){default:case"topRight":a+=r+s-30,o+=l;break;case"topLeft":o+=l,a+=r;break;case"centerRight":o=l+4,n=0,a=r+e.outerWidth(!0)+5;break;case"centerLeft":a=r-(t.width()+2),o=l+4,n=0;break;case"bottomLeft":o=l+e.height()+5,n=0,a=r;break;case"bottomRight":a=r+s-30,o=l+e.height()+5,n=0;break;case"inline":a=0,o=0,n=0}return a+=h,o+=f,{callerTopPosition:o+"px",callerleftPosition:a+"px",marginTopSize:n+"px"}},_saveOptions:function(t,i){if(e.validationEngineLanguage)var o=e.validationEngineLanguage.allRules;else e.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");e.validationEngine.defaults.allrules=o;var a=e.extend(!0,{},e.validationEngine.defaults,i);return t.data("jqv",a),a},_getClassName:function(e){return e?e.replace(/:/g,"_").replace(/\./g,"_"):void 0},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(e,i,o,a){var n,s;for(n=o+1;n<i.length;n++)if(s=jQuery("#"+i[n]).first(),s.length&&void 0==t._required(s,["required"],0,a,!0))return t._required(e,["required"],0,a)},_submitButtonClick:function(){var t=e(this),i=t.closest("form, .validationEngineContainer");i.data("jqv_submitButton",t.attr("id"))}};e.fn.validationEngine=function(i){var o=e(this);return o[0]?"string"==typeof i&&"_"!=i.charAt(0)&&t[i]?("showPrompt"!=i&&"hide"!=i&&"hideAll"!=i&&t.init.apply(o),t[i].apply(o,Array.prototype.slice.call(arguments,1))):"object"!=typeof i&&i?void e.error("Method "+i+" does not exist in jQuery.validationEngine"):(t.init.apply(o,arguments),t.attach.apply(o)):o},e.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:e.noop,onBeforeAjaxFormValidation:e.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:.3,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}},e(function(){e.validationEngine.defaults.promptPosition=t.isRTL()?"topLeft":"topRight"})}(jQuery),function(e){function t(){var e=document.createElement("input"),t="onpaste";return e.setAttribute(t,""),"function"==typeof e[t]?"paste":"input"}var i,o=t()+".mask",a=navigator.userAgent,n=/iphone/i.test(a),s=/android/i.test(a);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var i;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(i=this.createTextRange(),i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),e=0-i.duplicate().moveStart("character",-1e5),t=e+i.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,a){var r,l,d,c,u,p;return!t&&this.length>0?(r=e(this[0]),r.data(e.mask.dataName)()):(a=e.extend({placeholder:e.mask.placeholder,completed:null},a),l=e.mask.definitions,d=[],c=p=t.length,u=null,e.each(t.split(""),function(e,t){"?"==t?(p--,c=e):l[t]?(d.push(new RegExp(l[t])),null===u&&(u=d.length-1)):d.push(null)}),this.trigger("unmask").each(function(){function r(e){for(;++e<p&&!d[e];);return e}function h(e){for(;--e>=0&&!d[e];);return e}function f(e,t){var i,o;if(!(0>e)){for(i=e,o=r(t);p>i;i++)if(d[i]){if(!(p>o&&d[i].test(w[o])))break;w[i]=w[o],w[o]=a.placeholder,o=r(o)}b(),C.caret(Math.max(u,e))}}function m(e){var t,i,o,n;for(t=e,i=a.placeholder;p>t;t++)if(d[t]){if(o=r(t),n=w[t],w[t]=i,!(p>o&&d[o].test(n)))break;i=n}}function g(e){var t,i,o,a=e.which;8===a||46===a||n&&127===a?(t=C.caret(),i=t.begin,o=t.end,o-i===0&&(i=46!==a?h(i):o=r(i-1),o=46===a?r(o):o),_(i,o),f(i,o-1),e.preventDefault()):27==a&&(C.val(R),C.caret(0,y()),e.preventDefault())}function v(t){var i,o,n,l=t.which,c=C.caret();t.ctrlKey||t.altKey||t.metaKey||32>l||l&&(c.end-c.begin!==0&&(_(c.begin,c.end),f(c.begin,c.end-1)),i=r(c.begin-1),p>i&&(o=String.fromCharCode(l),d[i].test(o)&&(m(i),w[i]=o,b(),n=r(i),s?setTimeout(e.proxy(e.fn.caret,C,n),0):C.caret(n),a.completed&&n>=p&&a.completed.call(C))),t.preventDefault())}function _(e,t){var i;for(i=e;t>i&&p>i;i++)d[i]&&(w[i]=a.placeholder)}function b(){C.val(w.join(""))}function y(e){var t,i,o=C.val(),n=-1;for(t=0,pos=0;p>t;t++)if(d[t]){for(w[t]=a.placeholder;pos++<o.length;)if(i=o.charAt(pos-1),d[t].test(i)){w[t]=i,n=t;break}if(pos>o.length)break}else w[t]===o.charAt(pos)&&t!==c&&(pos++,n=t);return e?b():c>n+1?(C.val(""),_(0,p)):(b(),C.val(C.val().substring(0,n+1))),c?t:u}var C=e(this),w=e.map(t.split(""),function(e){return"?"!=e?l[e]?a.placeholder:e:void 0}),R=C.val();C.data(e.mask.dataName,function(){return e.map(w,function(e,t){return d[t]&&e!=a.placeholder?e:null}).join("")}),C.attr("readonly")||C.one("unmask",function(){C.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){clearTimeout(i);var e;R=C.val(),e=y(),i=setTimeout(function(){b(),e==t.length?C.caret(0,e):C.caret(e)},10)}).bind("blur.mask",function(){y(),C.val()!=R&&C.change()}).bind("keydown.mask",g).bind("keypress.mask",v).bind(o,function(){setTimeout(function(){var e=y(!0);C.caret(e),a.completed&&e==C.val().length&&a.completed.call(C)},0)}),y()}))}})}(jQuery),function(e){var t={_create:e.hik.jtable.prototype._create};e.extend(!0,e.hik.jtable.prototype,{options:{exportExcel:!1,exportPrint:!1,messages:{exportExcel:"Export to Excel",print:"Print"}},_create:function(){t._create.apply(this,arguments),this.options.exportExcel&&this._exportExcel(),this.options.exportPrint&&this._exportPrint()},_exportExcel:function(){var t=this,i={icon:"../jtable/lib/content/icone-excel20.gif",text:this.options.messages.exportExcel,click:function(){var i=t._$table.clone();i.find("tbody tr.jtable-child-row").each(function(){e(this).remove()}),t.options.toolbarsearch.enable&&i.find("thead tr").next().remove(),t.options.actions.deleteAction&&i.find("tbody tr").each(function(){e(this).find("td").last().remove()}),t.options.actions.updateAction&&i.find("tbody tr").each(function(){e(this).find("td").last().remove()}),i.find("tbody tr").each(function(){e(this).find("td img").remove()}),window.open("data:application/vnd.ms-excel,"+encodeURIComponent(i[0].outerHTML))}};this._addToolBarItem(i)},_exportPrint:function(){var t=this,i={icon:"../jtable/lib/content/icone-imprimante.gif",text:this.options.messages.print,click:function(){var i=t._$table[0].cloneNode(!0);e(i).find("tbody tr.jtable-child-row").each(function(){e(this).remove()}),t.options.toolbarsearch.enable&&e(i).find("thead tr").next().remove(),t.options.actions.updateAction&&(e(i).find("tbody tr").each(function(){e(this).find("td").last().remove()}),e(i).find("thead tr").each(function(){e(this).find("td").last().remove()})),t.options.actions.deleteAction&&(e(i).find("tbody tr").each(function(){e(this).find("td").last().remove()}),e(i).find("thead tr").each(function(){e(this).find("td").last().remove()}));var o=window.open("");e(i).css({border:"1px solid black","border-collapse":"collapse"}),e(i).find("thead tr").css({"background-color":"blue",color:"white"}),e(i).find("tr").css({border:"1px solid black"}),e(i).find("td").css({border:"1px solid black","vertical-align":"middle",padding:"5px"}),o.document.write(i.outerHTML),o.print(),o.close(),e(i).remove()}};this._addToolBarItem(i)}})}(jQuery);